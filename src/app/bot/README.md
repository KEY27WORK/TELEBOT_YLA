# 🤖 Пакет `bot` — Серце Telegram-бота YoungLA Ukraine

Цей документ описує архітектуру та логіку пакета **`bot`**, який відповідає за всю взаємодію Telegram-бота з користувачем.

---

## 🎯 Що вміє бот?

**YoungLA Ukraine Bot** допомагає працювати з товарами YoungLA прямо у Telegram:

- 🔗 **Парсить товари та колекції** за посиланнями
- 💱 **Розраховує вартість** у гривнях за актуальним чи користувацьким курсом
- 📦 **Перевіряє наявність** розмірів у різних регіонах
- 📏 **Виводить таблиці розмірів**
- ⌨️ **Дає зручне меню** для доступу до всіх функцій

---

## 🏛️ Архітектурні принципи

- **Feature-Driven Design** — логіка розбита на самодостатні "фічі" (папка `commands`).
- **Dependency Injection** — усі залежності створюються в контейнері та передаються в обробники.
- **Separation of Concerns** — кожна папка відповідає за свій шар (UI, логіка обробників, фічі).

---

## 🌳 Структура пакета

📦 **bot**  
┣ 📂 **commands** — самодостатні "фічі"  
┃ ┣ 📜 **__init__.py** — збирає та експортує всі фічі  
┃ ┣ 📜 **base.py** — абстрактний клас `BaseFeature` (контракт для всіх фіч)  
┃ ┣ 📜 **core_commands_feature.py** — обробка базових команд (`/start`, `/help`)  
┃ ┗ 📜 **main_menu_feature.py** — логіка кнопок головного меню  
┣ 📂 **handlers** — складна логіка обробників  
┃ ┣ 📂 **product** — все, що стосується товарів і колекцій  
┃ ┃ ┣ 📜 **collection_handler.py** — обробка колекцій  
┃ ┃ ┣ 📜 **image_sender.py** — надсилання фото товарів  
┃ ┃ ┣ 📜 **product_handler.py** — обробка одного товару  
┃ ┃ ┗ 📜 **product_message_builder.py** — збірка повідомлень  
┃ ┣ 📜 **__init__.py** — збирає та експортує глобальні обробники  
┃ ┣ 📜 **callback_handler.py** — обробка inline-кнопок  
┃ ┣ 📜 **link_handler.py** — маршрутизація текстових повідомлень (визначає режим і передає у потрібний обробник)  
┃ ┗ 📜 **size_chart_handler.py** — логіка таблиць розмірів  
┣ 📂 **ui** — інтерфейс та клавіатури  
┃ ┣ 📜 **__init__.py** — експорт компонентів UI  
┃ ┗ 📜 **keyboards.py** — клас `Keyboard` для генерації всіх клавіатур  
┣ 📜 **__init__.py** — ініціалізатор пакета  
┗ 📜 **main.py** — точка входу: збірка й запуск бота

---

## 📄 Що робить кожен компонент?

### **`main.py`**  
Точка входу.  
- Створює `Application`  
- Ініціалізує контейнер залежностей  
- Реєструє всі хендлери  
- Запускає бота з логікою перезапуску при помилках мережі

### **Папка `commands` (фічі)**  
Прості, незалежні модулі:
- **`BaseFeature`** (base.py) — контракт для всіх фіч
- **`CoreCommandsFeature`** — команди `/start` і `/help`
- **`MainMenuFeature`** — кнопки головного меню (перемикає режими, наприклад, "📏 Таблиця розмірів")

### **Папка `handlers` (складна логіка)**  
- **`LinkHandler`** — ключовий маршрутизатор. Отримує будь-який текст, визначає режим (товар, колекція, таблиця розмірів) і передає в потрібний обробник.
- **`CallbackHandler`** — обробляє inline-кнопки.
- **`ProductHandler` / `CollectionHandler`** — обробка товарів та колекцій.
- **`SizeChartHandlerBot`** — робота з таблицями розмірів.

### **Папка `ui` (інтерфейс)**  
- **`Keyboard`** — фабрика клавіатур (`main_menu`, `help_menu`, меню валют).

---

## 🚀 Як запустити?

1. Налаштуй середовище (дивись `README.md` у корені проєкту).  
2. Запусти:  

```bash
python app/bot/main.py