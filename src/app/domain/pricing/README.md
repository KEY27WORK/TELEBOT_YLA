# üí∏ –î–æ–º–µ–Ω: –¶–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ (Pricing)

–≠—Ç–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å–æ–¥–µ—Ä–∂–∏—Ç **—á–∏—Å—Ç—É—é –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É** –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ –ø–æ–ª–Ω–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —Ç–æ–≤–∞—Ä–∞. –≠—Ç–æ ¬´–º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —è–¥—Ä–æ¬ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –æ—Ç–≤–µ—á–∞—é—â–µ–µ –Ω–∞ –≤–æ–ø—Ä–æ—Å: ¬´–°–∫–æ–ª—å–∫–æ –¥–æ–ª–∂–µ–Ω —Å—Ç–æ–∏—Ç—å —Ç–æ–≤–∞—Ä –¥–ª—è –∫–æ–Ω–µ—á–Ω–æ–≥–æ –ø–æ–∫—É–ø–∞—Ç–µ–ª—è?¬ª.

---

## ‚öúÔ∏è –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

- **–ß–∏—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞ (–ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å)**: –ù–∏–∫–∞–∫–∏—Ö –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π. –ö–æ–¥ –Ω–µ –¥–µ–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∫ API, –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Ñ–∞–π–ª–∞–º–∏, –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –ø–∞—Ä—Å–µ—Ä–∞–º–∏.
- **–î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å**: –ü—Ä–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º.
- **–ï–¥–∏–Ω–∞—è –±–∞–∑–æ–≤–∞—è –≤–∞–ª—é—Ç–∞**: –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ä–∞—Å—á—ë—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥—è—Ç—Å—è –≤ **USD**. –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ ‚Äî –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ **UAH** –¥–ª—è –ª–æ–≥–∏–∫–∏ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è.
- **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å**: –ë–ª–∞–≥–æ–¥–∞—Ä—è —Å–≤–æ–µ–π —á–∏—Å—Ç–æ—Ç–µ, –º–æ–¥—É–ª—å –ª–µ–≥–∫–æ –ø–æ–∫—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–∞–¥—ë–∂–Ω—ã–º–∏ —é–Ω–∏—Ç-—Ç–µ—Å—Ç–∞–º–∏.

---

## üß© –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

–û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª **`services.py`** —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å—é –ª–æ–≥–∏–∫—É —Ä–∞—Å—á—ë—Ç–æ–≤:

- **`PricingService`** ‚Äî –≥–ª–∞–≤–Ω—ã–π —Å–µ—Ä–≤–∏—Å-—Ñ–∞—Å–∞–¥, –∫–æ—Ç–æ—Ä—ã–π –æ—Ä–∫–µ—Å—Ç—Ä–∏—Ä—É–µ—Ç –ø–æ–ª–Ω—ã–π —Ä–∞—Å—á—ë—Ç.
- **`FullPriceDetails` (DTO)** ‚Äî –æ–±—ä–µ–∫—Ç —Å –¥–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º —Ä–∞—Å—á—ë—Ç–∞.
- **`DiscountService`** ‚Äî –ø—Ä–∏–º–µ–Ω—è–µ—Ç —Å–∫–∏–¥–∫–∏.
- **`DeliveryService`** ‚Äî —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –¥–æ—Å—Ç–∞–≤–∫—É (–ª–æ–∫–∞–ª—å–Ω—É—é –∏ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—É—é).
- **`MarkupService`** ‚Äî –≤—ã—á–∏—Å–ª—è–µ—Ç –º–∞—Ä–∂–∏–Ω–∞–ª—å–Ω—É—é –Ω–∞—Ü–µ–Ω–∫—É.
- **`RoundingService`** ‚Äî –æ–∫—Ä—É–≥–ª—è–µ—Ç –∏—Ç–æ–≥–æ–≤—É—é —Ü–µ–Ω—É —á–µ—Ä–µ–∑ –≥—Ä–∏–≤–Ω—É.

---

## üöÄ –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–∑ –¥—Ä—É–≥–∏—Ö —Å–ª–æ—ë–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `infrastructure` –∏–ª–∏ `bot`) –∏—Å–ø–æ–ª—å–∑—É—é—Ç `PricingService`, –ø–µ—Ä–µ–¥–∞–≤–∞—è –µ–º—É –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ.

```python
# –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏–∑ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –≤ —Å–ª–æ–µ infrastructure
from app.domain.pricing.services import PricingService

# 1. –°–æ–∑–¥–∞—ë—Ç—Å—è —ç–∫–∑–µ–º–ø–ª—è—Ä —Å–µ—Ä–≤–∏—Å–∞ (–æ–Ω –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)
pricing_service = PricingService()

# 2. –í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ (—Ü–µ–Ω–∞ –≤ USD, –∫—É—Ä—Å) –≥–æ—Ç–æ–≤—è—Ç—Å—è –∑–∞—Ä–∞–Ω–µ–µ –∏ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ –º–µ—Ç–æ–¥
price_details = pricing_service.calculate_full_price(
    price_usd=45.0,
    weight_lbs=1.2,
    usd_to_uah_rate=40.75
)

# 3. –†–µ–∑—É–ª—å—Ç–∞—Ç ‚Äî —ç—Ç–æ —á–∏—Å—Ç—ã–π –æ–±—ä–µ–∫—Ç —Å –¥–∞–Ω–Ω—ã–º–∏, –≥–æ—Ç–æ–≤—ã–π –∫ –¥–∞–ª—å–Ω–µ–π—à–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–µ
print(f"–§–∏–Ω–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ –¥–ª—è –ø–æ–∫—É–ø–∞—Ç–µ–ª—è: ${price_details.sale_price_rounded_usd:.2f}")
print(f"–°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å: ${price_details.cost_price_usd:.2f}")
