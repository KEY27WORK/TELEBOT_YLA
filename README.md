# üöÄ TELEBOTYLAUKRAINE

–¢–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç –¥–ª—è –ø—Ä–æ—Å—É–Ω—É—Ç–æ—ó —Ä–æ–±–æ—Ç–∏ –∑ **e-commerce**:
–ø–∞—Ä—Å–∏–Ω–≥ —Ç–æ–≤–∞—Ä—ñ–≤, –º—É–ª—å—Ç–∏-—Ä–µ–≥—ñ–æ–Ω–∞–ª—å–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ, —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ —Ü—ñ–Ω, –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è –∫–æ–Ω—Ç–µ–Ω—Ç—É —Ç–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ OpenAI API.

‚∏ª

## üìå –û—Å–Ω–æ–≤–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

‚úÖ **–ü–∞—Ä—Å–∏–Ω–≥ —Ç–æ–≤–∞—Ä—ñ–≤ —Ç–∞ –∫–æ–ª–µ–∫—Ü—ñ–π** ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–µ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö —ñ–∑ —Å–∞–π—Ç—ñ–≤ (—Ü—ñ–Ω–∞, —Ñ–æ—Ç–æ, –≤–∞–≥–∞, –Ω–∞—è–≤–Ω—ñ—Å—Ç—å).
‚úÖ **–†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ —Ü—ñ–Ω** ‚Äî –Ω–æ–≤–µ –º–∞—Ç–µ–º–∞—Ç–∏—á–Ω–µ —è–¥—Ä–æ —É domain/pricing: –¥–æ—Å—Ç–∞–≤–∫–∞, –∫–æ–º—ñ—Å—ñ—ó, –Ω–∞—Ü—ñ–Ω–∫–∞, –æ–∫—Ä—É–≥–ª–µ–Ω–Ω—è —á–µ—Ä–µ–∑ UAH.
‚úÖ **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ**  ‚Äî –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–ª—å–æ—Ä—ñ–≤ —Ç–∞ —Ä–æ–∑–º—ñ—Ä—ñ–≤ —É —Ä–µ–≥—ñ–æ–Ω–∞—Ö (–°–®–ê, –Ñ–°, UK).
‚úÖ **–û–±—Ä–æ–±–∫–∞ —Ç–∞–±–ª–∏—Ü—å —Ä–æ–∑–º—ñ—Ä—ñ–≤** ‚Äî OCR-—Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è —Ç–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ç–∞–±–ª–∏—Ü—å —É —Å–∞–Ω—Ç–∏–º–µ—Ç—Ä–∞—Ö.
‚úÖ **–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ OpenAI** ‚Äî –ø–µ—Ä–µ–∫–ª–∞–¥, –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ö–µ—à—Ç–µ–≥—ñ–≤, –º—É–∑–∏—á–Ω—ñ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó.
‚úÖ **Playwright + Cloudflare Bypass**  ‚Äî —Å—Ç–∞–±—ñ–ª—å–Ω–∏–π –ø–∞—Ä—Å–∏–Ω–≥ –Ω–∞–≤—ñ—Ç—å —ñ–∑ –∑–∞—Ö–∏—Å—Ç–æ–º Cloudflare.
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è YoungLA-–∑–∞–º–æ–≤–ª–µ–Ω—å** ‚Äî .txt-—Ñ–∞–π–ª –∑—ñ SKU/Color/Size ‚Üí —Ç–æ–≤–∞—Ä–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
  –¥–æ–¥–∞—é—Ç—å—Å—è —É –∫–æ—à–∏–∫ —ñ –≤—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è Protected Checkout.

‚∏ª

## üìÇ –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ —Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É

–ü—Ä–æ—î–∫—Ç –ø–æ–±—É–¥–æ–≤–∞–Ω–∏–π –∑–∞ –ø—Ä–∏–Ω—Ü–∏–ø–∞–º–∏ **Clean Architecture**:
–ª–æ–≥—ñ–∫–∞ —Ä–æ–∑–¥—ñ–ª–µ–Ω–∞ –Ω–∞ –Ω–µ–∑–∞–ª–µ–∂–Ω—ñ —à–∞—Ä–∏, —â–æ —Ä–æ–±–∏—Ç—å –∫–æ–¥ –≥–Ω—É—á–∫–∏–º, —Ç–µ—Å—Ç–æ–≤–∞–Ω–∏–º —ñ –ø—Ä–æ—Å—Ç–∏–º —É –ø—ñ–¥—Ç—Ä–∏–º—Ü—ñ.

```bash
üì¶ TELEBOTYLAUKRAINE
‚îú‚îÄ‚îÄ üìÇ docs                     # üßæ –ì–∞–π–¥–∏, —Å—Ç–∞–π–ª–≥–∞–π–¥, recovery-–ø–ª–∞–Ω–∏
‚îú‚îÄ‚îÄ üìÇ src
‚îÇ   ‚îî‚îÄ‚îÄ üìÇ app
‚îÇ       ‚îú‚îÄ‚îÄ üìÇ assets           # üóÇÔ∏è –°—Ç–∞—Ç–∏—á–Ω—ñ —Ä–µ—Å—É—Ä—Å–∏
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ üìÇ fonts        # üî§ Fallback-—à—Ä–∏—Ñ—Ç–∏ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó —Ç–∞–±–ª–∏—Ü—å/–±–∞–Ω–µ—Ä—ñ–≤
‚îÇ       ‚îú‚îÄ‚îÄ üìÇ bot              # ü§ñ Telegram UI-—à–∞—Ä
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ commands     # üìú /start, /help, –º–µ–Ω—é, –≤–∞–ª—é—Ç–Ω—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ handlers     # üîó Link/Product/SizeChart/Price —Ö–µ–Ω–¥–ª–µ—Ä–∏
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ services     # üõ†Ô∏è CallbackRegistry, CustomContext, —Ñ–∞–±—Ä–∏–∫–∏
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ üìÇ ui           # üñºÔ∏è Messengers, —Ñ–æ—Ä–º–∞—Ç–µ—Ä–∏, –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∏
‚îÇ       ‚îú‚îÄ‚îÄ üìÇ config           # ‚öôÔ∏è DI —Ç–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ setup        # üß© Container, registrar, constants
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ üìÇ yamls        # üìë base/features/local/providers + README
‚îÇ       ‚îú‚îÄ‚îÄ üìÇ domain           # üß† –ß–∏—Å—Ç–µ –±—ñ–∑–Ω–µ—Å-—è–¥—Ä–æ
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ ai           # ü§ñ –ö–æ–Ω—Ç—Ä–∞–∫—Ç–∏ AI/prompt —Å–µ—Ä–≤—ñ—Å—ñ–≤
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ availability # üåç –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ content      # üè∑Ô∏è IHashtagGenerator —Ç–∞ DTO
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ currency     # üí± Money, IMoneyConverter
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ delivery     # üöö IDeliveryService —Ç–∞ DeliveryQuote
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ image_generation # üñºÔ∏è –ö–æ–Ω—Ç—Ä–∞–∫—Ç–∏ —à—Ä–∏—Ñ—Ç—ñ–≤
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ music        # üéµ –ö–æ–Ω—Ç—Ä–∞–∫—Ç–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ–π
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ pricing      # üí∞ FullPriceDetails, q2/percent, PricingService
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ products     # üì¶ DTO, entities, WeightResolver
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ size_chart   # üìè ISizeChartService —Ç–∞ –ø–æ–¥—ñ—ó –ø—Ä–æ–≥—Ä–µ—Å—É
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ üìÇ web          # üåê IWebClient –∫–æ–Ω—Ç—Ä–∞–∫—Ç
‚îÇ       ‚îú‚îÄ‚îÄ üìÇ errors           # üõ°Ô∏è Error handler, —Å—Ç—Ä–∞—Ç–µ–≥—ñ—ó, custom errors
‚îÇ       ‚îú‚îÄ‚îÄ üìÇ i18n             # üåê YAML-–ª–æ–∫–∞–ª—ñ–∑–∞—Ü—ñ—ó (uk/ru/en)
‚îÇ       ‚îú‚îÄ‚îÄ üìÇ infrastructure   # üèóÔ∏è –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó —Ç–∞ –∞–¥–∞–ø—Ç–µ—Ä–∏
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ adapters     # üîå HashtagAdapter, PriceMessageFacade
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ ai           # ü§ñ OpenAI –∫–ª—ñ—î–Ω—Ç–∏, AI Task Service
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ availability # ‚úÖ Manager, handler, cache, formatter
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ collection_processing # ‚öôÔ∏è –ó–±—ñ—Ä –ø–æ—Å–∏–ª–∞–Ω—å –∫–æ–ª–µ–∫—Ü—ñ–π
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ content      # üìù AltText, HashtagGenerator, ProductContentService
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ currency     # üí± CurrencyManager, legacy converters
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ data_storage # üóÑÔ∏è WeightDataService
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ delivery     # üöö MeestDeliveryService
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ image_generation # üñºÔ∏è FontService
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ music        # üéµ Downloader, sender, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ parsers      # üîé BaseParser, factories, collections, extractors
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ services     # üß† ProductProcessingService + —Ñ–∞—Å–∞–¥–∏
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ size_chart   # üßæ OCR, –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∏ —Ç–∞–±–ª–∏—Ü—å, YoungLA finder
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ url          # üîó YoungLAUrlStrategy
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ üìÇ web          # üåç Playwright WebDriverService
‚îÇ       ‚îú‚îÄ‚îÄ üìÇ shared           # üß∞ –ö–µ—à—ñ, –º–µ—Ç—Ä–∏–∫–∏, –ø—Ä–æ–º–ø—Ç–∏, —É—Ç–∏–ª—ñ—Ç–∏
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ cache        # ‚ôªÔ∏è HtmlLruCache
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ metrics      # üìä Prometheus counters/exporter
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ prompts      # ‚úçÔ∏è uk/ocr –ø—Ä–æ–º–ø—Ç–∏
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ üìÇ utils        # üß± Logger, url parser, collections, errors
‚îú‚îÄ‚îÄ üìÇ tests                   # üß™ Pytest- —Ç–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó
‚îú‚îÄ‚îÄ üìÇ music_cache             # üéµ –õ–æ–∫–∞–ª—å–Ω–∏–π –∫–µ—à –∞—É–¥—ñ–æ/—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ–π
‚îú‚îÄ‚îÄ üìÇ logs                    # üìú Runtime-–ª–æ–≥–∏ –±–æ—Ç–∞/—ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π
‚îú‚îÄ‚îÄ üìÇ htmlcov                 # üìà Coverage-—Ä–µ–ø–æ—Ä—Ç–∏ (–≥–µ–Ω–µ—Ä—É—é—Ç—å—Å—è –∑–∞ –ø–æ—Ç—Ä–µ–±–∏)
‚îú‚îÄ‚îÄ üìú .env                    # üîê –°–µ–∫—Ä–µ—Ç–∏ (OpenAI, Telegram tokens)
‚îú‚îÄ‚îÄ üìú pyproject.toml          # üì¶ Poetry-–∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
‚îú‚îÄ‚îÄ üìú README.md               # üìò –¶–µ–π —Ñ–∞–π–ª
‚îî‚îÄ‚îÄ üìú project_recovery_guide.md # üÜò –ü–ª–∞–Ω –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—ñ—Å–ª—è –∑–±–æ—ó–≤
‚∏ª

## üß© –®–∞—Ä–∏ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏

üîπ domain ‚Äî —á–∏—Å—Ç–µ —è–¥—Ä–æ —Å–∏—Å—Ç–µ–º–∏: —Ç—ñ–ª—å–∫–∏ –º–æ–¥–µ–ª—ñ —Ç–∞ –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞, –±–µ–∑ –∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π.
üîπ infrastructure ‚Äî —Ä–æ–±–æ—Ç–∞ —ñ–∑ –∑–æ–≤–Ω—ñ—à–Ω—ñ–º —Å–≤—ñ—Ç–æ–º: –ø–∞—Ä—Å–µ—Ä–∏, API, OpenAI, WebDriver, –∫–µ—à.
üîπ bot ‚Äî UI —à–∞—Ä: Telegram-–∫–æ–º–∞–Ω–¥–∏, —Ö–µ–Ω–¥–ª–µ—Ä–∏, —Ñ–æ—Ä–º–∞—Ç–µ—Ä–∏, –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è.
üîπ config ‚Äî DI —Ç–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è: yaml-—Ñ–∞–π–ª–∏, —Å–µ—Ä–≤—ñ—Å–∏, –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∏.
üîπ errors ‚Äî —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π –æ–±—Ä–æ–±–Ω–∏–∫ –ø–æ–º–∏–ª–æ–∫ –¥–ª—è —Å—Ç–∞–±—ñ–ª—å–Ω–æ—Å—Ç—ñ –±–æ—Ç–∞.
üîπ shared ‚Äî –∑–∞–≥–∞–ª—å–Ω—ñ —É—Ç–∏–ª—ñ—Ç–∏ —Ç–∞ –ø—Ä–æ–º–ø—Ç–∏.

‚∏ª

## üß† –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω–∞ –¥—ñ–∞–≥—Ä–∞–º–∞ (4 —à–∞—Ä–∏)

```mermaid
flowchart TD
    A[bot (UI)] --> B[infrastructure]
    B --> C[domain]
    A --> D[config]
    A --> E[errors]
    B --> E
    A --> F[shared]
    B --> F
    C --> F

    subgraph UI
      A
    end
    subgraph Infra
      B
    end
    subgraph Domain
      C
    end
    subgraph Config/DI
      D
    end
    subgraph Errors
      E
    end
    subgraph Shared
      F
    end
```

üîπ domain ‚Äî —á–∏—Å—Ç—ñ –º–æ–¥–µ–ª—ñ/–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∏, –±–µ–∑ –∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π.
üîπ infrastructure ‚Äî —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó (OpenAI, –ø–∞—Ä—Å–µ—Ä–∏, Playwright, –∫–µ—à—ñ, delivery).
üîπ bot (UI) ‚Äî Telegram-–æ–±–æ–ª–æ–Ω–∫–∞ (handlers, messengers, —Ñ–æ—Ä–º–∞—Ç–µ—Ä–∏).
üîπ config ‚Äî DI/–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, YAML-–∫–æ–Ω—Ñ—ñ–≥–∏, –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∏.
üîπ errors ‚Äî —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π error-handling.
üîπ shared ‚Äî —É—Ç–∏–ª—ñ—Ç–∏, –ø—Ä–æ–º–ø—Ç–∏, —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏.

‚∏ª

## üåê –ö–æ–Ω—Ç–µ–∫—Å—Ç: –∑–æ–≤–Ω—ñ—à–Ω—ñ —Å–∏—Å—Ç–µ–º–∏

```mermaid
flowchart LR
  U[–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á —É Telegram] -->|–ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è| TG[Telegram Bot API]
  TG -->|webhook/polling| BOT[YoungLA Bot (–ø—Ä–æ—Ü–µ—Å)]
  BOT -->|HTTP| OPENAI[OpenAI API]
  BOT -->|/metrics (–æ–ø—Ü—ñ–π–Ω–æ)| PROM[Prometheus (—Å–∫—Ä–µ–π–ø–µ—Ä)]
```

*(–Ø–∫—â–æ –º–µ—Ç—Ä–∏–∫–∏ –Ω–µ –≤–≤—ñ–º–∫–Ω–µ–Ω—ñ ‚Äî —Ü–µ–π –±–ª–æ–∫ –º–æ–∂–Ω–∞ –∑–∞–ª–∏—à–∏—Ç–∏ —è–∫ ¬´–æ–ø—Ü—ñ–π–Ω–æ¬ª.)*

---

## üîÅ –ü–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å: –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –∫–∏–¥–∞—î –ª—ñ–Ω–∫

```mermaid
sequenceDiagram
  participant U as User (Telegram)
  participant TG as Telegram API
  participant B as Bot
  participant S as Services/Parsers
  participant W as Websites

  U->>TG: –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ URL
  TG->>B: –∞–ø–¥–µ–π—Ç
  B->>S: –æ–±—Ä–æ–±–∏—Ç–∏ URL
  S->>W: –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Å—Ç–æ—Ä—ñ–Ω–∫—É (Playwright, —Ä–µ—Ç—Ä–∞—ó)
  W-->>S: HTML
  S-->>B: ProductInfo (+–¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞)
  B-->>TG: –∫–∞—Ä—Ç–∫–∞ —Ç–æ–≤–∞—Ä—É
```


## üß∞ Dependency Injection (DI) —Ç–∞ –∫–æ–º–ø–æ–∑–∏—Ü—ñ—è
–ì–æ–ª–æ–≤–Ω–∞ —Ç–æ—á–∫–∞ –∑–±–∏—Ä–∞–Ω–Ω—è ‚Äî app/config/setup/container.py. –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä:
—Å—Ç–≤–æ—Ä—é—î —Å–µ—Ä–≤—ñ—Å–∏ —É –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É –ø–æ—Ä—è–¥–∫—É,
–≤–ø—Ä–æ–≤–∞–¥–∂—É—î –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∏,
–Ω–∞–¥–∞—î —î–¥–∏–Ω—É —Ç–æ—á–∫—É –¥–æ—Å—Ç—É–ø—É –¥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤.

# app/config/setup/container.py (—É—Ä–∏–≤–æ–∫)
class Container:
    def _setup_infrastructure(self) -> None:
        self.currency_manager = CurrencyManager(config_service=self.config)              # üí± –ö—É—Ä—Å–∏ –≤–∞–ª—é—Ç
        self.delivery_service = MeestDeliveryService(config_service=self.config)        # üöö –¢–∞—Ä–∏—Ñ–∏ –¥–æ—Å—Ç–∞–≤–∫–∏
        ...

    def _setup_domain_services(self) -> None:
        self.pricing_service = PricingService(                                         # üí∞ –î–æ–º–µ–Ω–Ω–µ —Ü—ñ–Ω–æ—É—Ç–≤–æ—Ä–µ–Ω–Ω—è
            delivery_service=self.delivery_service,
        )
        self.weight_resolver = WeightResolver(...)                                     # ‚öñÔ∏è –Ü–Ω—à—ñ –¥–æ–º–µ–Ω–Ω—ñ —Å–µ—Ä–≤—ñ—Å–∏

    def _setup_high_level_services(self) -> None:
        self.price_calculator = PriceCalculationHandler(
            currency_manager=self.currency_manager,
            parser_factory=self.parser_factory,
            pricing_service=self.pricing_service,
            config_service=self.config,
            constants=self.constants,
            exception_handler=self.exception_handler_service,
            url_parser_service=self.url_parser_service,
        )
        self.content_service = ProductContentService(
            translator=self.translator_service,
            hashtag_generator=self.hashtag_generator,
            price_handler=self.price_calculator,
            alt_text_generator=self.alt_text_generator,
        )

–ü–µ—Ä–µ–¥ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫–æ–º —Ü—ñ–Ω–∏ `PriceCalculationHandler` –æ–Ω–æ–≤–ª—é—î –∫—É—Ä—Å–∏ (`CurrencyManager.update_all_rates_if_needed()`), –¥—ñ—Å—Ç–∞—î `IMoneyConverter` —ñ –≤–∂–µ —É —Ñ–æ–Ω–æ–≤–æ–º—É –ø–æ—Ç–æ—Ü—ñ –≤–∏–∫–ª–∏–∫–∞—î `PricingService.calculate_full_price(...)`. –î–æ–º–µ–Ω–Ω–∏–π —Å–µ—Ä–≤—ñ—Å –∑–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è –¥–æ `IDeliveryService.quote(...)`, –æ–± º—î–¥–Ω—É—î –ª–æ–∫–∞–ª—å–Ω—ñ –≤–∏—Ç—Ä–∞—Ç–∏ –∑ `PricingContext` —Ç–∞ –ø–æ–≤–µ—Ä—Ç–∞—î `FullPriceDetails`, —Ç–æ–º—É UI-—à–∞—Ä –Ω–µ –∑–Ω–∞—î –ø—Ä–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–µ—Ä–µ–≤—ñ–∑–Ω–∏–∫–∞ —á–∏ —Ñ–æ—Ä–º—É–ª—É –æ–∫—Ä—É–≥–ª–µ–Ω–Ω—è.
–ü–µ—Ä–µ–≤–∞–≥–∏: –ø–µ—Ä–µ–¥–±–∞—á—É–≤–∞–Ω–∞ –∫–æ–º–ø–æ–∑–∏—Ü—ñ—è, –ø—Ä–æ–∑–æ—Ä–∞ —ñ–∑–æ–ª—è—Ü—ñ—è —à–∞—Ä—ñ–≤, –∑—Ä—É—á–Ω—ñ –∑–∞–º—ñ–Ω–∏ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ–π —É —Ç–µ—Å—Ç–∞—Ö. 

‚∏ª

## üß≤ –ü–∞—Ç–µ—Ä–Ω Adapter (—É–∑–≥–æ–¥–∂–µ–Ω–Ω—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ñ–≤)

1) Price-facade: –≤—ñ–¥–æ–∫—Ä–µ–º–ª—é—î —Ç–µ–ª–µ–≥—Ä–∞–º-—á–∞—Å—Ç–∏–Ω—É –≤—ñ–¥ –ø—ñ–¥—Ä–∞—Ö—É–Ω–∫—É —Ü—ñ–Ω–∏.
# infrastructure/adapters/price_facade_adapter.py
class IPriceMessageFacade(Protocol):
    async def calculate_and_format(self, url: str) -> Tuple[ProductInfo, str, List[str]]: ...

class PriceMessageFacade(IPriceMessageFacade):
    def __init__(self, handler) -> None:  # PriceCalculationHandler
        self._handler = handler

    async def calculate_and_format(self, url: str):
        return await self._handler._calculate_and_format(url)
2) Hashtag-adapter: –¥–æ–º–µ–Ω –æ—á—ñ–∫—É—î Set[str], UI ‚Äî –≥–æ—Ç–æ–≤–∏–π —Ä—è–¥–æ–∫.
# infrastructure/content/adapters/hashtag_adapter.py
class HashtagGeneratorStringAdapter:
    def __init__(self, inner: IHashtagGenerator) -> None:
        self._inner = inner

    async def generate(self, product_info: ProductInfo) -> str:
        tags: Set[str] = await self._inner.generate(product_info)
        return " ".join(sorted(tags)) if tags else ""
–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤ –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä—ñ –∫–æ–Ω—Ç–µ–Ω—Ç—É:
self._hashtags = HashtagGeneratorStringAdapter(hashtag_generator)  # Set[str] -> str
self._price: IPriceMessageFacade = PriceMessageFacade(price_handler)

‚∏ª

## ‚öôÔ∏è ParserInfraOptions (—ñ–Ω—Ñ—Ä–∞-–æ–ø—Ü—ñ—ó –ø–∞—Ä—Å–µ—Ä—ñ–≤)
–£–Ω—ñ—Ñ—ñ–∫–æ–≤–∞–Ω—ñ –±–µ–∑–ø–µ—á–Ω—ñ –æ–ø—Ü—ñ—ó –∑ –≤–∞–ª—ñ–¥–∞—Ü—ñ—î—é —Ç–∞ –∑–±–∏—Ä–∞–Ω–Ω—è–º –∑ ENV.
–§–∞–π–ª: app/infrastructure/parsers/_infra_options.py.
–ö–ª—é—á–æ–≤—ñ –ø–æ–ª—è: html_parser, request_timeout_sec, retry_attempts, images_limit, filter_small_images, user_agent, locale, —Ç–æ—â–æ.
from app.infrastructure.parsers._infra_options import ParserInfraOptions

opts = ParserInfraOptions.from_env_autodetect()\
       .merge(images_limit=40, enable_progress=False)

parser = ParserFactory(..., default_options=opts).create_product_parser(
    url, html_parser="lxml", request_timeout_sec=20, locale="uk"
)
ENV-–ø–∞—Ä–∞–º–µ—Ç—Ä–∏ (–ø—Ä–µ—Ñ—ñ–∫—Å PARSER_ –∞–±–æ –±—Ä–µ–Ω–¥-–ø—Ä–µ—Ñ—ñ–∫—Å):
–ö–ª—é—á	–ü—Ä–∏–∫–ª–∞–¥	–û–ø–∏—Å
PARSER_HTML_PARSER	lxml	–î—Ä–∞–π–≤–µ—Ä BS4 (lxml, html.parser ‚Ä¶)
PARSER_REQUEST_TIMEOUT_SEC	30	–¢–∞–π–º–∞—É—Ç –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
PARSER_RETRY_ATTEMPTS	3	–†–µ—Ç—Ä–∞—ó –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
PARSER_IMAGES_LIMIT	30	–õ—ñ–º—ñ—Ç –∑–æ–±—Ä–∞–∂–µ–Ω—å
PARSER_FILTER_SMALL_IMAGES	1 / 0	–§—ñ–ª—å—Ç—Ä –¥—Ä—ñ–±–Ω–∏—Ö/–ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ñ–≤
PARSER_USER_AGENT	Mozilla/5.0 ...	Per-env UA
PARSER_LOCALE	uk	–õ–æ–∫–∞–ª—å –µ–∫—Å—Ç—Ä–∞–∫—Ç–æ—Ä–∞
–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è —Ñ–∞–±—Ä–∏–∫–æ—é: ParserFactory(default_options=ParserInfraOptions.default()).

‚∏ª

## üîó UrlStrategy + UrlParserService
–ú–µ—Ç–∞ ‚Äî —ñ–Ω–∫–∞–ø—Å—É–ª—é–≤–∞—Ç–∏ –±—Ä–µ–Ω–¥-—Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω—É –ª–æ–≥—ñ–∫—É URL/–≤–∞–ª—é—Ç–∏/—Ä–µ–≥—ñ–æ–Ω—ñ–≤.
# app/shared/utils/url_parser_service.py
service = UrlParserService(strategies=[YoungLAUrlStrategy(cfg)])
service.get_currency("https://eu.youngla.com/...")  # -> "EUR"
service.is_collection_url(url)  # –ø—Ä–æ—Å—Ç–∏–π —Ö–µ–ª–ø–µ—Ä –¥–ª—è /collections/
service.build_product_url("uk", "products/some-item")  # –±—Ä–µ–Ω–¥–æ–≤–∏–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
–£ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ:
self.url_parser_service = UrlParserService([YoungLAUrlStrategy(self.config)])
–¶–µ —Ä–æ–∑—Ä–∏–≤–∞—î –∑–≤ º—è–∑–æ–∫ –º—ñ–∂ –ø–∞—Ä—Å–µ—Ä–æ–º —ñ –¥–æ–º–µ–Ω–æ–º: –≤–∞–ª—é—Ç–∞/—Ä–µ–≥—ñ–æ–Ω –ø—Ä–∏—Ö–æ–¥—è—Ç—å –∑ —î–¥–∏–Ω–æ–≥–æ —Å–µ—Ä–≤—ñ—Å—É.

‚∏ª

## üï∏Ô∏è Playwright WebDriverService (–∑ Cloudflare-—Ä–µ—Ç—Ä–∞—è–º–∏)
–§–∞–π–ª: app/infrastructure/web/webdriver_service.py.
–û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ:
startup()/shutdown() ‚Äî –∫–µ—Ä—É–≤–∞–Ω–Ω—è –∂–∏—Ç—Ç—î–≤–∏–º —Ü–∏–∫–ª–æ–º,
stealth + —Ä–µ—Ç—Ä–∞—ó 403/429/502,
–∫–æ–Ω—Ñ—ñ–≥ —á–µ—Ä–µ–∑ YAML (playwright.*),
per-call overrides: wait_until, timeout_ms, user_agent, retries‚Ä¶
html = await webdriver.get_page_content(
    url,
    wait_until="networkidle",
    timeout_ms=25_000,
    user_agent="Mozilla/5.0 ...",  # –ø–µ—Ä-–≤–∏–∫–ª–∏–∫ UA
)
–í–∏—Ç—Ä–∏–º—É—î Cloudflare splash (—Ñ—Ä–∞–∑–∏ –Ω–∞–ª–∞—à—Ç–æ–≤—É—é—Ç—å—Å—è —É 60_playwright.yaml).

‚∏ª

## üß± ParserFactory ‚Üí BaseParser (end-to-end)

# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–∞—Ä—Å–µ—Ä–∞ —Ç–æ–≤–∞—Ä—É –∑ DI-—Å–µ—Ä–≤—ñ—Å–∞–º–∏ —Ç–∞ –æ–ø—Ü—ñ—è–º–∏
parser = container.parser_factory.create_product_parser(
    url, html_parser="lxml", enable_progress=False, request_timeout_sec=30
)

# 1) HTML ‚Üí 2) HtmlDataExtractor ‚Üí 3) –ø–æ—Å—Ç-–æ–±—Ä–æ–±–∫–∞ (fallback/weight) ‚Üí 4) ProductInfo
info = await parser.get_product_info()
BaseParser –≥–∞—Ä–∞–Ω—Ç—É—î –±–µ–∑–ø–µ—á–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è —Ç–∞ –ø–æ–≤–µ—Ä—Ç–∞—î —ñ–º–º—É—Ç–∞–±–µ–ª—å–Ω–∏–π ProductInfo
(Decimal-—Ü—ñ–Ω–∞, tuple –∑–æ–±—Ä–∞–∂–µ–Ω—å, MappingProxyType –¥–ª—è —Å–µ–∫—Ü—ñ–π/stock).

‚∏ª

## üß© ProductContentService (–∞–≥—Ä–µ–≥–∞—Ç–æ—Ä –∫–æ–Ω—Ç–µ–Ω—Ç—É)
–ë—É–¥—É—î –∫–∞—Ä—Ç–∫—É —Ç–æ–≤–∞—Ä—É, –≤–∏–∫–æ–Ω—É—é—á–∏ –ø—ñ–¥–∑–∞–¥–∞—á—ñ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ:
dto = await content_service.build_product_content(
    product=product_info,
    url=product_url,
    colors_text="... (–∑–≤—ñ—Ç –ø–æ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ) ..."
)
translator.generate_slogan(...)
translator.translate_sections(...)
HashtagGeneratorStringAdapter.generate(...) # Set[str] -> str
PriceMessageFacade.calculate_and_format(url) -> (_, price_message, images)
–ù–∞ –≤–∏—Ö–æ–¥—ñ –æ—Ç—Ä–∏–º—É—î—à —Å—Ç—Ä–æ–≥–æ —Ç–∏–ø—ñ–∑–æ–≤–∞–Ω–∏–π ProductContentDTO (–±–µ–∑ None).

‚∏ª

## üîÑ –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü—ñ—è –≤ –±–æ—Ç—ñ (Handlers/Messengers)
LinkHandler –≤–∏–∑–Ω–∞—á–∞—î, —â–æ –∑–∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è (—Ç–æ–≤–∞—Ä/–∫–æ–ª–µ–∫—Ü—ñ—è/size chart/–ø–æ—à—É–∫).
ProductHandler –∑–∞–ø—É—Å–∫–∞—î ProductProcessingService ‚Üí –ø–∞—Ä—Å–∏–Ω–≥ + –∫–æ–Ω—Ç–µ–Ω—Ç.
ProductMessenger —Ñ–æ—Ä–º–∞—Ç—É—î —Ç–∞ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è/–≥–∞–ª–µ—Ä–µ—é.
CallbackHandler ‚Äî —î–¥–∏–Ω–∞ —Ç–æ—á–∫–∞ –¥–ª—è inline-–∫–Ω–æ–ø–æ–∫.
BotRegistrar —Ä–µ—î—Å—Ç—Ä—É—î –≤—Å—ñ –æ–±—Ä–æ–±–Ω–∏–∫–∏ —á–µ—Ä–µ–∑ DI-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.

‚∏ª

## üß™ –¢–µ—Å—Ç–∏ —Ç–∞ —Å—Ç–∞–±—ñ–ª—å–Ω—ñ—Å—Ç—å
IMP-024: snapshot-—Ç–µ—Å—Ç–∏ –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç-—Å–µ—Ä–≤—ñ—Å—É (—Å—Ç–∞–±—ñ–ª—å–Ω–∏–π —Å–ª–æ–≥–∞–Ω/—Ö–µ—à—Ç–µ–≥–∏ –ø—Ä–∏ –æ–¥–Ω–∞–∫–æ–≤–æ–º—É –≤—Ö–æ–¥—ñ).
–ú–æ–∫–∏ –¥–ª—è OpenAI/Playwright, —Ñ—ñ–∫—Å—Ç—É—Ä–∏ –¥–ª—è YAML/ENV.

‚∏ª

## üß± –†–æ–∑—à–∏—Ä–µ–Ω–Ω—è
–ù–æ–≤–∏–π –±—Ä–µ–Ω–¥: –¥–æ–¥–∞–π —Å—Ç—Ä–∞—Ç–µ–≥—ñ—é IUrlParsingStrategy, –ø—ñ–¥–∫–ª—é—á–∏ —É UrlParserService.
–ù–æ–≤–∏–π —Ä–µ–≥—ñ–æ–Ω: –¥–æ–ø–æ–≤–Ω–∏ yamls/base/00_regions.yaml + –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≤–∞–ª—é—Ç–∏ —É constants.
–ù–æ–≤–∞ –ª–æ–≥—ñ–∫–∞ —Ü—ñ–Ω–æ—É—Ç–≤–æ—Ä–µ–Ω–Ω—è: –∑–º—ñ–Ω—é–π domain/pricing (–ø—Ä–∞–≤–∏–ª–∞/–æ–∫—Ä—É–≥–ª–µ–Ω–Ω—è).
–ù–æ–≤–µ –¥–∂–µ—Ä–µ–ª–æ –≤–∞–≥–∏: —Ä–æ–∑—à–∏—Ä—é–π WeightResolver (–¥–∞–Ω—ñ/AI-–æ—Ü—ñ–Ω–∫–∞).

‚∏ª

## ‚öôÔ∏è –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
.env ‚Üí —Å–µ–∫—Ä–µ—Ç–∏ (OPENAI_API_KEY, TELEGRAM_BOT_TOKEN).
config/yamls/** ‚Üí —Ä–µ–≥—ñ–æ–Ω–∏, –ø—Ä–∞–π—Å–∏–Ω–≥, Playwright, —Ñ—ñ—á—ñ (music, telegram).
ConfigService –∑–ª–∏–≤–∞—î .env + YAML –∑ —ñ–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü—ñ—î—é ${VAR:-default}.

‚∏ª

## üßØ –¢—Ä–æ—Ö–∏ —Ç—Ä–±–ª—à—É—Ç—ñ–Ω–≥—É
Cloudflare/429? –ü—ñ–¥–∫—Ä—É—Ç–∏ playwright.retry_attempts, retry_delay_sec, navigation_timeout_ms.
–ü–æ—Ä–æ–∂–Ω—ñ —Å–µ–∫—Ü—ñ—ó –æ–ø–∏—Å—É? –£–≤—ñ–º–∫–Ω–∏ fallback —É parser.description_fallback.* –∞–±–æ –ø–µ—Ä–µ–≤—ñ—Ä —Å–µ–ª–µ–∫—Ç–æ—Ä–∏ –≤ 15_parser_selectors.yaml.
–í–∞–≥–∞ 0 –≥? –ü–µ—Ä–µ–≤—ñ—Ä WeightResolver –¥–∂–µ—Ä–µ–ª–∞/–≤—ñ–¥–ø–æ–≤—ñ–¥—ñ AI.


## üöÄ –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

1Ô∏è‚É£ –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:

poetry install

2Ô∏è‚É£ –°—Ç–≤–æ—Ä—ñ—Ç—å .env —ñ –≤–∫–∞–∂—ñ—Ç—å –∫–ª—é—á—ñ API:

OPENAI_API_KEY=your-key
TELEGRAM_BOT_TOKEN=your-token

3Ô∏è‚É£ –ó–∞–ø—É—Å—Ç—ñ—Ç—å –±–æ—Ç–∞:

poetry run python app/bot/main.py


‚∏ª

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó
	‚Ä¢	Python 3.11+
	‚Ä¢	Clean Architecture + Dependency Injection
	‚Ä¢	python-telegram-bot (PTB)
	‚Ä¢	Playwright + BeautifulSoup
	‚Ä¢	OpenAI GPT-4
	‚Ä¢	yt-dlp (–º—É–∑–∏–∫–∞)

‚∏ª

### üë§ –†–æ–∑—Ä–æ–±–Ω–∏–∫

–ö–∏—Ä–∏–ª–ª / @key27
üì¨ Telegram: t.me/key27

‚∏ª

### üìú –õ—ñ—Ü–µ–Ω–∑—ñ—è

MIT License
