# üì¶ app/bot/commands/base.py ‚Äî –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω–∏–π –±–∞–∑–æ–≤–∏–π –∫–ª–∞—Å –¥–ª—è –≤—Å—ñ—Ö "—Ñ—ñ—á" –±–æ—Ç–∞.
"""
üß© base.py ‚Äî –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω–∏–π –±–∞–∑–æ–≤–∏–π –∫–ª–∞—Å –¥–ª—è –≤—Å—ñ—Ö "—Ñ—ñ—á" –±–æ—Ç–∞.

üîπ –í–∏–∑–Ω–∞—á–∞—î —î–¥–∏–Ω–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤—Å—ñ—Ö –º–æ–¥—É–ª—ñ–≤ —Ñ—ñ—á.
üîπ –ì–∞—Ä–∞–Ω—Ç—É—î, —â–æ –∫–æ–∂–µ–Ω –º–æ–¥—É–ª—å –º–∞—Ç–∏–º–µ –º–µ—Ç–æ–¥ `register_handlers`.
"""

# üî† –°–∏—Å—Ç–µ–º–Ω—ñ —ñ–º–ø–æ—Ä—Ç–∏
from abc import ABC, abstractmethod                            # üß± –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω–∏–π –±–∞–∑–æ–≤–∏–π –∫–ª–∞—Å
from typing import Protocol, Dict, Callable, Awaitable         # üß∞ –¢–∏–ø–∏ –¥–ª—è Protocol —Ç–∞ –æ–±—Ä–æ–±–Ω–∏–∫—ñ–≤

# üåê –ó–æ–≤–Ω—ñ—à–Ω—ñ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏
from telegram import Update                                    # üåç –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∑ Telegram API
from telegram.ext import Application, CallbackContext          # ‚öôÔ∏è –ö–æ–Ω—Ç–µ–∫—Å—Ç Telegram —Ç–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—è

# ================================
# üîß –¢–ò–ü–ò –Ü –ü–†–û–¢–û–ö–û–õ–ò
# ================================

# ================================
# üß† –¢–ò–ü –û–ë–†–û–ë–ù–ò–ö–ê CALLBACK'–Ü–í
# ================================
CallbackHandlerType = Callable[[Update, CallbackContext], Awaitable[None]]  # üîÑ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–π —Ç–∏–ø –æ–±—Ä–æ–±–Ω–∏–∫–∞

# ‚úÖ –ü—Ä–æ—Ç–æ–∫–æ–ª –¥–ª—è –æ–±'—î–∫—Ç—ñ–≤, —â–æ –º–æ–∂—É—Ç—å —Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏ callback-–∏
class Registrable(Protocol):
    """
    üìã –ü—Ä–æ—Ç–æ–∫–æ–ª, —â–æ –æ–ø–∏—Å—É—î –æ–±'—î–∫—Ç, —è–∫–∏–π –º–æ–∂–µ –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏ callback-–æ–±—Ä–æ–±–Ω–∏–∫–∏.
    """
    def get_callback_handlers(self) -> Dict[str, CallbackHandlerType]:
        ...

# ================================
# üèõÔ∏è –ë–ê–ó–û–í–ò–ô –ö–õ–ê–° –§–Ü–ß–Ü
# ================================
class BaseFeature(ABC):
    """
    üß© –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω–∏–π –±–∞–∑–æ–≤–∏–π –∫–ª–∞—Å –¥–ª—è –±—É–¥—å-—è–∫–æ—ó —Ñ—ñ—á—ñ Telegram-–±–æ—Ç–∞.

    –ö–æ–∂–µ–Ω –º–æ–¥—É–ª—å, —â–æ –Ω–∞—Å–ª—ñ–¥—É—î —Ü–µ–π –∫–ª–∞—Å, –ø–æ–≤–∏–Ω–µ–Ω —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ `register_handlers`.
    """

    @abstractmethod
    def register_handlers(self, application: Application):
        """
        üìå –ú–µ—Ç–æ–¥, —è–∫–∏–π –ø–æ–≤–∏–Ω–µ–Ω –∑–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏ –≤—Å—ñ Telegram-–æ–±—Ä–æ–±–Ω–∏–∫–∏ —Ñ—ñ—á—ñ.

        Args:
            application (Application): ü§ñ –û–±'—î–∫—Ç Telegram-–±–æ—Ç–∞
        """
        raise NotImplementedError                                # ‚ùó –ü–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π —É –¥–æ—á—ñ—Ä–Ω—å–æ–º—É –∫–ª–∞—Å—ñ
