""" üìã menu_handler.py ‚Äî –æ–±—Ä–æ–±–∫–∞ –ø—É–Ω–∫—Ç—ñ–≤ –≥–æ–ª–æ–≤–Ω–æ–≥–æ –º–µ–Ω—é Telegram-–±–æ—Ç–∞ YoungLA Ukraine.

üîπ –ö–ª–∞—Å `MenuHandler`:
- –í–º–∏–∫–∞—î —Ä–µ–∂–∏–º–∏ —Ä–æ–±–æ—Ç–∏: —Ç–æ–≤–∞—Ä–∏, –∫–æ–ª–µ–∫—Ü—ñ—ó, —Ç–∞–±–ª–∏—Ü—ñ —Ä–æ–∑–º—ñ—Ä—ñ–≤, —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫
- –í—ñ–¥–ø–æ–≤—ñ–¥–∞—î –Ω–∞ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è –∫–Ω–æ–ø–æ–∫ –≥–æ–ª–æ–≤–Ω–æ–≥–æ –º–µ–Ω—é
- –ü–æ–∫–∞–∑—É—î –¥–æ–ø–æ–º–æ–≥—É, –∫—É—Ä—Å–∏ –≤–∞–ª—é—Ç, –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è

–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î:
- –ö–ª–∞–≤—ñ–∞—Ç—É—Ä–∏ (`Keyboard`)
- –õ–æ–≥—É–≤–∞–Ω–Ω—è
- –û–±—Ä–æ–±–∫—É –ø–æ–º–∏–ª–æ–∫ —á–µ—Ä–µ–∑ `@error_handler`
"""

# üåê Telegram API
from telegram import Update
from telegram.ext import CallbackContext

# ‚å®Ô∏è –ö–ª–∞–≤—ñ–∞—Ç—É—Ä–∏ —Ç–∞ –ª–æ–≥—ñ–∫–∞
from bot.keyboards import Keyboard
from errors.error_handler import error_handler

# üß± –°–∏—Å—Ç–µ–º–Ω—ñ
import logging


class MenuHandler:
    """ üìã –û–±—Ä–æ–±–Ω–∏–∫ –º–µ–Ω—é –≤ Telegram-–±–æ—Ç—ñ.

    –í—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞ –ø–µ—Ä–µ–º–∏–∫–∞–Ω–Ω—è —Ä–µ–∂–∏–º—ñ–≤ —Ä–æ–±–æ—Ç–∏ –±–æ—Ç–∞ —Ç–∞ –æ–±—Ä–æ–±–∫—É —Ç–µ–∫—Å—Ç–æ–≤–∏—Ö –∫–æ–º–∞–Ω–¥.
    """

    @staticmethod
    @error_handler
    async def handle_menu(update: Update, context: CallbackContext):
        """ üì• –ü—Ä–∏–π–º–∞—î —Ç–µ–∫—Å—Ç–æ–≤—É –∫–æ–º–∞–Ω–¥—É –∑ –≥–æ–ª–æ–≤–Ω–æ–≥–æ –º–µ–Ω—é —Ç–∞ –ø–µ—Ä–µ–º–∏–∫–∞—î —Ä–µ–∂–∏–º –∞–±–æ –≤–∏–∫–æ–Ω—É—î –¥—ñ—é.

        :param update: –û–±'—î–∫—Ç Telegram Update
        :param context: –ö–æ–Ω—Ç–µ–∫—Å—Ç –∑ user_data
        """
        text = update.message.text.strip()
        user_data = context.user_data

        if text == "üîó –í—Å—Ç–∞–≤–ª—è—Ç–∏ –ø–æ—Å–∏–ª–∞–Ω–Ω—è —Ç–æ–≤–∞—Ä—ñ–≤":
            user_data["mode"] = "product"
            await update.message.reply_text(
                "‚úÖ –†–µ–∂–∏–º –≤—Å—Ç–∞–≤–∫–∏ –ø–æ—Å–∏–ª–∞–Ω—å –Ω–∞ —Ç–æ–≤–∞—Ä–∏ –∞–∫—Ç–∏–≤–æ–≤–∞–Ω–æ.\n–ù–∞–¥—Å–∏–ª–∞–π—Ç–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –ø–æ –æ–¥–Ω–æ–º—É."
            )

        elif text == "üìö –†–µ–∂–∏–º –∫–æ–ª–µ–∫—Ü—ñ–π":
            user_data["mode"] = "collection"
            await update.message.reply_text(
                "‚úÖ –†–µ–∂–∏–º –∫–æ–ª–µ–∫—Ü—ñ–π –∞–∫—Ç–∏–≤–æ–≤–∞–Ω–æ.\n–ù–∞–¥—Å–∏–ª–∞–π—Ç–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –∫–æ–ª–µ–∫—Ü—ñ—é."
            )

        elif text == "üìè –¢–∞–±–ª–∏—Ü—è —Ä–æ–∑–º—ñ—Ä—ñ–≤":
            user_data["mode"] = "size_chart"
            await update.message.reply_text(
                "üìè –†–µ–∂–∏–º —Ç–∞–±–ª–∏—Ü—å —Ä–æ–∑–º—ñ—Ä—ñ–≤ –∞–∫—Ç–∏–≤–æ–≤–∞–Ω–æ.\n–ù–∞–¥—Å–∏–ª–∞–π—Ç–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ —Ç–æ–≤–∞—Ä."
            )
                                                                                                                                                     
        elif text == "üåç –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ä–æ–∑–º—ñ—Ä–∏ –≤ —Ä–µ–≥—ñ–æ–Ω–∞—Ö":                                                                                              
            user_data["mode"] = "region_availability"                                                                                                 
            await update.message.reply_text(                                                                                                          
                "üåç –†–µ–∂–∏–º –º—É–ª—å—Ç–∏-—Ä–µ–≥—ñ–æ–Ω–∞–ª—å–Ω–æ—ó –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –∞–∫—Ç–∏–≤–æ–≤–∞–Ω–æ.\n–ù–∞–¥—ñ—à–ª—ñ—Ç—å –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ —Ç–æ–≤–∞—Ä."                                                   
            )                                                                                                                                                             

        elif text == "üßÆ –†–µ–∂–∏–º —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É —Ç–æ–≤–∞—Ä—É":
            user_data["mode"] = "price_calculation"
            await update.message.reply_text(
                "üßÆ –†–µ–∂–∏–º —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É —Ü—ñ–Ω–∏ –∞–∫—Ç–∏–≤–æ–≤–∞–Ω–æ.\n–ù–∞–¥—Å–∏–ª–∞–π—Ç–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ —Ç–æ–≤–∞—Ä."
            )

        elif text == "üì¶ –ú–æ—ó –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è":
            await update.message.reply_text("üì¶ –£ –≤–∞—Å –ø–æ–∫–∏ —â–æ –Ω–µ–º–∞—î –∑–∞–º–æ–≤–ª–µ–Ω—å.")

        elif text == "üí± –ö—É—Ä—Å –≤–∞–ª—é—Ç":
            await update.message.reply_text(
                "üí± –í–∏–±–µ—Ä—ñ—Ç—å –¥—ñ—é –∑ –∫—É—Ä—Å–æ–º –≤–∞–ª—é—Ç:",
                reply_markup=Keyboard.currency_menu()
            )

        elif text == "‚ùì –î–æ–ø–æ–º–æ–≥–∞":
            await update.message.reply_text(
                "üÜò –ß–∏–º –º–æ–∂—É –¥–æ–ø–æ–º–æ–≥—Ç–∏?",
                reply_markup=Keyboard.help_menu()
            )

        elif text == "‚èπÔ∏è –í–∏–º–∫–Ω—É—Ç–∏ —Ä–µ–∂–∏–º":
            user_data["mode"] = None
            await update.message.reply_text(
                "‚èπÔ∏è –£—Å—ñ —Ä–µ–∂–∏–º–∏ –≤–∏–º–∫–Ω–µ–Ω–æ.",
                reply_markup=Keyboard.main_menu()
            )

        else:
            logging.info(f"üì≠ –ù–µ–≤—ñ–¥–æ–º–∞ –∫–æ–º–∞–Ω–¥–∞ –∑ –º–µ–Ω—é: {text}")
            await update.message.reply_text("‚ùì –¶—è –æ–ø—Ü—ñ—è –ø–æ–∫–∏ —â–æ –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è.")
