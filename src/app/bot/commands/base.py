# üì¶ app/bot/commands/base.py
"""
üì¶ –ë–∞–∑–æ–≤–∞ –∞–±—Å—Ç—Ä–∞–∫—Ü—ñ—è –¥–ª—è –≤—Å—ñ—Ö ¬´—Ñ—ñ—á¬ª Telegram-–±–æ—Ç–∞.

üîπ –í–∏–∑–Ω–∞—á–∞—î –∫–æ–Ω—Ç—Ä–∞–∫—Ç `BaseFeature` –∑ –º–µ—Ç–æ–¥–æ–º —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó —Ö–µ–Ω–¥–ª–µ—Ä—ñ–≤
üîπ –î–æ–¥–∞—î —î–¥–∏–Ω—É —Ç–æ—á–∫—É –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è callback-—Ö–µ–Ω–¥–ª–µ—Ä—ñ–≤
üîπ –°–ª—É–∂–∏—Ç—å –æ—Å–Ω–æ–≤–æ—é –¥–ª—è DI —Ç–∞ —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–æ—ó —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó –≤ –±–æ—Ç—ñ
"""

from __future__ import annotations

# üåê –ó–æ–≤–Ω—ñ—à–Ω—ñ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏
from telegram.ext import Application                                       # ü§ñ –ì–æ–ª–æ–≤–Ω–∏–π –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ python-telegram-bot

# üî† –°–∏—Å—Ç–µ–º–Ω—ñ —ñ–º–ø–æ—Ä—Ç–∏
from abc import ABC                                                        # üß± –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ñ –∫–ª–∞—Å–∏
from typing import Dict                                                    # üß∞ –¢–∏–ø –¥–ª—è –º–∞–ø–∏ callback-—Ö–µ–Ω–¥–ª–µ—Ä—ñ–≤
import logging                                                             # üßæ –õ–æ–≥—É–≤–∞–Ω–Ω—è –±–∞–∑–æ–≤–∏—Ö –¥—ñ–π

# üß© –í–Ω—É—Ç—Ä—ñ—à–Ω—ñ –º–æ–¥—É–ª—ñ –ø—Ä–æ—î–∫—Ç—É
from app.bot.services.callback_data_factory import CallbackData            # üè∑Ô∏è –¢–∏–ø –¥–ª—è callback-–¥–∞–Ω–∏—Ö
from app.bot.services.types import CallbackHandlerType, Registrable        # üîó –ü—Ä–æ—Ç–æ–∫–æ–ª–∏ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó
from app.shared.utils.logger import LOG_NAME                               # üè∑Ô∏è –Ü–º'—è –∫–æ—Ä–µ–Ω–µ–≤–æ–≥–æ –ª–æ–≥–µ—Ä–∞

logger = logging.getLogger(LOG_NAME)                                       # üßæ –ú–æ–¥—É–ª—å–Ω–∏–π –ª–æ–≥–µ—Ä
# but LOG_NAME not imported! need to import from app.shared.utils.logger ‚Äì add import.

# ================================
# üèõÔ∏è –ë–ê–ó–û–í–ò–ô –ö–û–ù–¢–†–ê–ö–¢ –§–Ü–ß–Ü
# ================================
class BaseFeature(ABC, Registrable):
    """
    üß© –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω–∏–π –∫–ª–∞—Å, –≤—ñ–¥ —è–∫–æ–≥–æ –Ω–∞—Å–ª—ñ–¥—É—é—Ç—å—Å—è –≤—Å—ñ ¬´—Ñ—ñ—á—ñ¬ª Telegram-–±–æ—Ç–∞.

    –ö–æ–∂–Ω–∞ —Ñ—ñ—á–∞:
      ‚Ä¢ —Ä–µ–∞–ª—ñ–∑—É—î `register_handlers`, —â–æ–± –ø—ñ–¥–ø–∏—Å–∞—Ç–∏—Å—è –Ω–∞ –∫–æ–º–∞–Ω–¥–Ω—ñ/–ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è/inline-—Ö–µ–Ω–¥–ª–µ—Ä–∏;
      ‚Ä¢ –∑–∞ –ø–æ—Ç—Ä–µ–±–∏ –ø–µ—Ä–µ–≤–∏–∑–Ω–∞—á–∞—î `get_callback_handlers`, —â–æ–± –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ –≤–ª–∞—Å–Ω—ñ callback-–æ–±—Ä–æ–±–Ω–∏–∫–∏.
    """

    # ================================
    # üîå –†–ï–Ñ–°–¢–†–ê–¶–Ü–Ø –¢–ï–õ–ï–ì–†–ê–ú-–•–ï–ù–î–õ–ï–†–Ü–í
    # ================================
    def register_handlers(self, application: Application) -> None:
        """
        üîå –†–µ—î—Å—Ç—Ä—É—î —Ö–µ–Ω–¥–ª–µ—Ä–∏ —É –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É `python-telegram-bot`.

        Args:
            application: –û–±'—î–∫—Ç `Application`, —á–µ—Ä–µ–∑ —è–∫–∏–π –¥–æ–¥–∞—é—Ç—å—Å—è –∫–æ–º–∞–Ω–¥–Ω—ñ/–ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è/inline-—Ö–µ–Ω–¥–ª–µ—Ä–∏.
        """
        logger.debug("üõ†Ô∏è BaseFeature.register_handlers called for %s", type(self).__name__)  # üßæ –¢—Ä–∞—Å—É—î–º–æ –≤–∏–∫–ª–∏–∫–∏
        _ = application                                                     # ü™ß –ü–∞—Ä–∞–º–µ—Ç—Ä –ª–∏—à–µ–Ω–æ –¥–ª—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—ñ –∑ –¥–æ—á—ñ—Ä–Ω—ñ–º–∏ –∫–ª–∞—Å–∞–º–∏
        return                                                             # üîï –ë–∞–∑–æ–≤–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –Ω—ñ—á–æ–≥–æ –Ω–µ —Ä–µ—î—Å—Ç—Ä—É—î (callback-only —Ñ—ñ—á–∞)

    # ================================
    # üìö CALLBACK-–•–ï–ù–î–õ–ï–†–ò
    # ================================
    def get_callback_handlers(self) -> Dict[CallbackData, CallbackHandlerType]:
        """
        üìö –ü–æ–≤–µ—Ä—Ç–∞—î –º–∞–ø—É callback-–∫–ª—é—á—ñ–≤ –Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ –∫–æ—Ä—É—Ç–∏–Ω–∏.

        Returns:
            Dict[CallbackData, CallbackHandlerType]: –ö–ª—é—á ‚Üí –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–π —Ö–µ–Ω–¥–ª–µ—Ä.
        """
        logger.debug("üìö BaseFeature.get_callback_handlers called for %s", type(self).__name__)  # üßæ –¢—Ä–∞—Å—É—î–º–æ –¥–æ—Å—Ç—É–ø –¥–æ callback-—ñ–≤
        return {}                                                          # üì≠ –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º ‚Äî –ø–æ—Ä–æ–∂–Ω—å–æ, –¥–æ—á—ñ—Ä–Ω—ñ–π –∫–ª–∞—Å –º–æ–∂–µ —Ä–æ–∑—à–∏—Ä–∏—Ç–∏


# ================================
# üì§ –ü–£–ë–õ–Ü–ß–ù–ò–ô API
# ================================
__all__ = ["BaseFeature"]                                                  # üßæ –ï–∫—Å–ø–æ—Ä—Ç—É—î–º–æ –±–∞–∑–æ–≤–∏–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç
