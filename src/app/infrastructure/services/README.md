# üß† services ‚Äî –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∏ —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏

–ü–∞–∫–µ—Ç –º—ñ—Å—Ç–∏—Ç—å —Å–µ—Ä–≤—ñ—Å–∏ –≤–µ—Ä—Ö–Ω—å–æ–≥–æ —Ä—ñ–≤–Ω—è, —è–∫—ñ –∞–≥—Ä–µ–≥—É—é—Ç—å –∫—ñ–ª—å–∫–∞ –ø—ñ–¥—Å–∏—Å—Ç–µ–º —ñ –ø–æ–≤–µ—Ä—Ç–∞—é—Ç—å —î–¥–∏–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è –±–æ—Ç–∞/UI.

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```bash
üì¶ services/
‚îú‚îÄ‚îÄ üìò README.md                     # —Ü–µ–π —Ñ–∞–π–ª: –æ–≥–ª—è–¥ –ø–∞–∫–µ—Ç–∞
‚îú‚îÄ‚îÄ üìÑ __init__.py                   # –µ–∫—Å–ø–æ—Ä—Ç–∏ –ø—É–±–ª—ñ—á–Ω–∏—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤/DTO
‚îú‚îÄ‚îÄ üìÇ facades/                      # —Ç–æ–Ω–∫—ñ –æ–±–≥–æ—Ä—Ç–∫–∏ –Ω–∞–¥ –æ–∫—Ä–µ–º–∏–º–∏ –ø—ñ–¥—Å–∏—Å—Ç–µ–º–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ üìò README.md                 # –æ–ø–∏—Å —Ñ–∞—Å–∞–¥—ñ–≤
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ __init__.py               # –µ–∫—Å–ø–æ—Ä—Ç–∏ —Ñ–∞—Å–∞–¥—ñ–≤/DTO
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ availability_facade.py    # —Ñ–∞—Å–∞–¥ –¥–ª—è AvailabilityProcessingService
‚îÇ   ‚îî‚îÄ‚îÄ üìÑ music_facade.py           # —Ñ–∞—Å–∞–¥ –¥–ª—è MusicRecommendation
‚îî‚îÄ‚îÄ üìÑ product_processing_service.py # –≥–æ–ª–æ–≤–Ω–∏–π —Å–µ—Ä–≤—ñ—Å-–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –ø—Ä–æ–¥—É–∫—Ç—É
```

---

## üßµ –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –ø—Ä–æ–¥—É–∫—Ç—É

- `ProductProcessingService`:
  - —Å—Ç–≤–æ—Ä—é—î –ø–∞—Ä—Å–µ—Ä —Ç–æ–≤–∞—Ä—É (`ParserFactory`) —ñ –æ—Ç—Ä–∏–º—É—î `ProductInfo`;
  - –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ –≤–∏–∫–ª–∏–∫–∞—î `AvailabilityProcessingService` —Ç–∞ `MusicRecommendation`;
  - –≥–µ–Ω–µ—Ä—É—î –∫–æ–Ω—Ç–µ–Ω—Ç —á–µ—Ä–µ–∑ `ProductContentService`;
  - –æ–ø—Ü—ñ–π–Ω–æ –∑–∞–ø—É—Å–∫–∞—î size-chart –ø–∞–π–ø–ª–∞–π–Ω, —Ñ–æ—Ä–º—É—é—á–∏ `Diagnostics` (IMP-059);
  - –ø–æ–≤–µ—Ä—Ç–∞—î `ProductProcessingResult`, —â–æ –º—ñ—Å—Ç–∏—Ç—å `ProcessedProductData` –∞–±–æ –∫–æ–¥ –ø–æ–º–∏–ª–∫–∏.

---

## üì¶ DTO

- `ProcessedProductData` ‚Äî –≤—Å–µ, —â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –±–æ—Ç—É/UI: –≤–∏—Ö—ñ–¥–Ω–∏–π URL, HTML, —Ä–µ–≥—ñ–æ–Ω, –∫–æ–Ω—Ç–µ–Ω—Ç, –º—É–∑–∏—á–Ω–∏–π —Ç–µ–∫—Å—Ç, –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏.  
- `ProductProcessingResult` ‚Äî –æ–±–≥–æ—Ä—Ç–∫–∞ –∑ –ø—Ä–∞–ø–æ—Ä—Ü–µ–º —É—Å–ø—ñ—Ö—É —Ç–∞ –∫–æ–¥–∞–º–∏ –ø–æ–º–∏–ª–æ–∫ (`InvalidInput`, `ParsingFailed`, `ContentBuildFailed`, `UnexpectedError`).  
- `Diagnostics` ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è—Ö —ñ size-chart OCR.

---

## üèõÔ∏è –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω—ñ –ø—Ä–∏–Ω—Ü–∏–ø–∏

- –Ñ–¥–∏–Ω–∏–π –ø—É–±–ª—ñ—á–Ω–∏–π –º–µ—Ç–æ–¥ `process_url(url: str)` –ø–æ–≤–µ—Ä—Ç–∞—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±–µ–∑ –≤–∏–Ω—è—Ç–∫—ñ–≤.
- –°–µ—Ä–≤—ñ—Å –ø—Ä–∞—Ü—é—î –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ (`asyncio.gather`) —ñ —Ç–æ–ª–µ—Ä–∞–Ω—Ç–Ω–∏–π –¥–æ —á–∞—Å—Ç–∫–æ–≤–∏—Ö –∑–±–æ—ó–≤ (availability/music/size chart –Ω–µ –≤–∞–ª—è—Ç—å —É–≤–µ—Å—å —Ü–∏–∫–ª).
- –í–µ—Å—å UI-—Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω–∏–π –∫–æ–¥ (Telegram) –ª–∏—à–∞—î—Ç—å—Å—è –∑–æ–≤–Ω—ñ ‚Äî —Ç—É—Ç –ª–∏—à–µ –ø—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–∏—Ö.
- –§–∞—Å–∞–¥–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó `facades/` –Ω–∞–¥–∞—é—Ç—å –ª–µ–≥–∫—É —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—é, –∞–ª–µ –Ω–µ —î –æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–∏–º–∏ –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä—ñ—é.

---

## üìå –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

```python
from app.infrastructure.services.product_processing_service import ProductProcessingService

service = ProductProcessingService(
    parser_factory=parser_factory,
    availability_processing_service=availability_service,
    content_service=content_service,
    music_recommendation=music_service,
    url_parser_service=url_parser,
    size_chart_service=size_chart_service,  # –æ–ø—Ü—ñ–π–Ω–æ
)

result = await service.process_url("https://youngla.com/products/12345")
if result.ok and result.data:
    print(result.data.content.slogan)
    print(result.data.diagnostics.ocr_status)
```

---

## üõ† –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è

`services` —î —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ—é —Ç–æ—á–∫–æ—é —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω–æ—ó –æ–±—Ä–æ–±–∫–∏ –ø—Ä–æ–¥—É–∫—Ç—ñ–≤: –≤–æ–Ω–æ —ñ–∑–æ–ª—é—î —Ä–æ–±–æ—Ç—É –∑ –ø–∞—Ä—Å–µ—Ä–∞–º–∏, –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º, –º—É–∑–∏–∫–æ—é —Ç–∞ size chart, –Ω–∞–¥–∞—é—á–∏ –±–æ—Ç—É —î–¥–∏–Ω–∏–π, –∑—Ä—É—á–Ω–∏–π –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –æ–±‚Äô—î–∫—Ç. –¶–µ —Å–ø—Ä–æ—â—É—î –ø—ñ–¥—Ç—Ä–∏–º–∫—É —Ç–∞ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –≤—Å—ñ—î—ó —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ.
