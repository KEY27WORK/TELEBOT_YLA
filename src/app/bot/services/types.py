# üß∞ app/bot/services/types.py
"""
üß∞ types.py ‚Äî –ó–∞–≥–∞–ª—å–Ω—ñ —Ç–∏–ø–∏ –¥–∞–Ω–∏—Ö –¥–ª—è —Å–µ—Ä–≤—ñ—Å—ñ–≤ —Ç–∞ —Ñ—ñ—á –±–æ—Ç–∞.

üîπ –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:
- –í–∏–∑–Ω–∞—á–∞—î –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∏ (–ø—Ä–æ—Ç–æ–∫–æ–ª–∏) –¥–ª—è –≤–∑–∞—î–º–æ–¥—ñ—ó –º—ñ–∂ —á–∞—Å—Ç–∏–Ω–∞–º–∏ –±–æ—Ç–∞.
- –ù–∞–¥–∞—î —É–Ω—ñ—Ñ—ñ–∫–æ–≤–∞–Ω—ñ —Ç–∏–ø–∏ –∫–æ–ª–±–µ–∫-–æ–±—Ä–æ–±–Ω–∏–∫—ñ–≤ –¥–ª—è inline-–∫–Ω–æ–ø–æ–∫.
- –î–æ–ø–æ–º–∞–≥–∞—î —É–Ω–∏–∫–∞—Ç–∏ —Ü–∏–∫–ª—ñ—á–Ω–∏—Ö –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π –∑–∞–≤–¥—è–∫–∏ —Å–ª–∞–±–∫–æ–º—É –∑–≤'—è–∑—É–≤–∞–Ω–Ω—é (Protocol).
"""

# üî† –°–∏—Å—Ç–µ–º–Ω—ñ —ñ–º–ø–æ—Ä—Ç–∏
from typing import Any, Protocol, Mapping, Callable, Coroutine, TypeAlias					# üß∞ –ë–∞–∑–æ–≤—ñ —Ç–∏–ø–∏ —Ç–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª–∏

# üåê –ó–æ–≤–Ω—ñ—à–Ω—ñ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏
from telegram import Update																			# ü§ñ –¢–∏–ø –ø–æ–¥—ñ—ó Telegram (–æ–Ω–æ–≤–ª–µ–Ω–Ω—è)

# üß© –í–Ω—É—Ç—Ä—ñ—à–Ω—ñ –º–æ–¥—É–ª—ñ –ø—Ä–æ—î–∫—Ç—É
from .callback_data_factory import CallbackData												# üîó –¢–∏–ø—ñ–∑–æ–≤–∞–Ω—ñ –¥–∞–Ω—ñ –¥–ª—è callback_data
from .custom_context import CustomContext													# üß† –ö–∞—Å—Ç–æ–º–Ω–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –±–æ—Ç–∞


# ================================
# üîß –¢–ò–ü–ò –¢–ê –ü–†–û–¢–û–ö–û–õ–ò
# ================================
# –¢–∏–ø –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏—Ö –æ–±—Ä–æ–±–Ω–∏–∫—ñ–≤ inline-–∫–Ω–æ–ø–æ–∫ (Update + –Ω–∞—à CustomContext)
CallbackHandlerType: TypeAlias = Callable[[Update, CustomContext], Coroutine[Any, Any, None]]		# ‚è±Ô∏è –°–∏–≥–Ω–∞—Ç—É—Ä–∞: async def handler(update, context) -> None


class Registrable(Protocol):
    """
    üìã –ü—Ä–æ—Ç–æ–∫–æ–ª, —â–æ –æ–ø–∏—Å—É—î –æ–±'—î–∫—Ç, –∑–¥–∞—Ç–Ω–∏–π —Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏/–Ω–∞–¥–∞–≤–∞—Ç–∏
    —Å–ª–æ–≤–Ω–∏–∫ –æ–±—Ä–æ–±–Ω–∏–∫—ñ–≤ –¥–ª—è inline-–∫–Ω–æ–ø–æ–∫ (callback_query).

    –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è Protocol –¥–æ–∑–≤–æ–ª—è—î —É–Ω–∏–∫–∞—Ç–∏ –∂–æ—Ä—Å—Ç–∫–∏—Ö –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π –≤—ñ–¥
    –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏—Ö –∫–ª–∞—Å—ñ–≤, –¥–æ—Ç—Ä–∏–º—É—é—á–∏—Å—å –ø—Ä–∏–Ω—Ü–∏–ø—ñ–≤ SOLID (LSP, DIP).
    """

    def get_callback_handlers(self) -> Mapping[CallbackData, CallbackHandlerType]:
        """
        –ü–æ–≤–µ—Ä—Ç–∞—î —Å–ª–æ–≤–Ω–∏–∫ –º–∞–ø—ñ–Ω–≥—É callback-–∫–ª—é—á—ñ–≤ –Ω–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ –æ–±—Ä–æ–±–Ω–∏–∫–∏.

        Returns:
            Mapping[CallbackData, CallbackHandlerType]:
                {–∫–ª—é—á_callback'—É ‚Üí async-–æ–±—Ä–æ–±–Ω–∏–∫ (Update, CustomContext) -> None}
        """
        ...																					# ¬´Protocol-—Ç—ñ–ª–æ¬ª –Ω–µ —Ä–µ–∞–ª—ñ–∑—É—î—Ç—å—Å—è (ellipsis)


# ================================
# üì¶ –ü–£–ë–õ–Ü–ß–ù–ò–ô API –ú–û–î–£–õ–Ø
# ================================
__all__ = [
    "CallbackHandlerType",
    "Registrable",
    "CallbackData",
    "CustomContext",
]																				# ü™™ –û–±–º–µ–∂—É—î–º–æ, —â–æ –µ–∫—Å–ø–æ—Ä—Ç—É—î—Ç—å—Å—è –∑ –º–æ–¥—É–ª—è
