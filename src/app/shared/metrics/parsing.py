# üìà app/shared/metrics/parsing.py
# -*- coding: utf-8 -*-
"""
üìà –ú–µ—Ç—Ä–∏–∫–∏ Prometheus –¥–ª—è –ø—Ä–æ—Ü–µ—Å—ñ–≤ –ø–∞—Ä—Å–∏–Ω–≥—É.

üîπ –í–∏–º—ñ—Ä—é—î —É—Å–ø—ñ—à–Ω—ñ —Ç–∞ –Ω–µ–≤–¥–∞–ª—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó –ø–∞—Ä—Å–∏–Ω–≥—É.
üîπ –î–æ–∑–≤–æ–ª—è—î —Å–µ–≥–º–µ–Ω—Ç—É–≤–∞—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –∑–∞ –¥–∂–µ—Ä–µ–ª–æ–º (parser/webdriver).
üîπ –§—ñ–∫—Å—É—î –ø—Ä–∏—á–∏–Ω—É –∑–±–æ—é –¥–ª—è —Å–ø—Ä–æ—â–µ–Ω–Ω—è –∞–Ω–∞–ª—ñ–∑—É —ñ–Ω—Ü–∏–¥–µ–Ω—Ç—ñ–≤.
"""

from __future__ import annotations

# üåê –ó–æ–≤–Ω—ñ—à–Ω—ñ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏
from prometheus_client import Counter  # üìä –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –ª—ñ—á–∏–ª—å–Ω–∏–∫—ñ–≤ Prometheus

# ================================
# ‚úÖ –£–°–ü–Ü–®–ù–Ü –û–ü–ï–†–ê–¶–Ü–á –ü–ê–†–°–ò–ù–ì–£
# ================================
PARSING_SUCCESS = Counter(
    "parsing_success_total",                          # üÜî –ù–∞–∑–≤–∞ –º–µ—Ç—Ä–∏–∫–∏
    "Successful parsing operations",                  # üìù –û–ø–∏—Å –º–µ—Ç—Ä–∏–∫–∏
    labelnames=("source",),                           # üîñ –î–∂–µ—Ä–µ–ª–æ: parser | webdriver
)

# ================================
# ‚ùå –ù–ï–í–î–ê–õ–Ü –û–ü–ï–†–ê–¶–Ü–á –ü–ê–†–°–ò–ù–ì–£
# ================================
PARSING_FAILURE = Counter(
    "parsing_failure_total",                          # üÜî –ù–∞–∑–≤–∞ –º–µ—Ç—Ä–∏–∫–∏
    "Failed parsing operations",                      # üìù –û–ø–∏—Å –º–µ—Ç—Ä–∏–∫–∏
    labelnames=("source", "reason"),                  # üîñ –î–∂–µ—Ä–µ–ª–æ + –ø—Ä–∏—á–∏–Ω–∞ (exception|timeout|invalid_url‚Ä¶)
)

# ================================
# üì¶ –ï–ö–°–ü–û–†–¢ –ú–û–î–£–õ–Ø
# ================================
__all__ = ["PARSING_SUCCESS", "PARSING_FAILURE"]
