"""
üíæ cache_service.py ‚Äî –°–µ—Ä–≤—ñ—Å –∫–µ—à—É–≤–∞–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ —Ç–æ–≤–∞—Ä—É.

üîπ –ö–ª–∞—Å `AvailabilityCacheService`:
- –ö–µ—à—É—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞–ø–∏—Ç—É –Ω–∞ –ø–µ–≤–Ω–∏–π —á–∞—Å (TTL)
- –ó–∞—Ö–∏—â–∞—î –≤—ñ–¥ –ø–æ–≤—Ç–æ—Ä–Ω–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤ –¥–æ —Å–∞–π—Ç—É
- –ü—Ä–∞—Ü—é—î —É –ø–∞–º º—è—Ç—ñ, —à–≤–∏–¥–∫–∏–π —ñ –ø—Ä–æ—Å—Ç–∏–π
"""

# üì¶ –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ
import time
from typing import Dict

class AvailabilityCacheService:
    """
    üìä –°–µ—Ä–≤—ñ—Å –∫–µ—à—É–≤–∞–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ —Ç–æ–≤–∞—Ä—É.
    """

    def __init__(self):
        # –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ–π –∫–µ—à —É –≤–∏–≥–ª—è–¥—ñ —Å–ª–æ–≤–Ω–∏–∫–∞
        self._cache: Dict[str, dict] = {}

    def get(self, key: str, ttl: int) -> dict | None:
        """
        üß™ –û—Ç—Ä–∏–º–∞—Ç–∏ –∫–µ—à–æ–≤–∞–Ω—ñ –¥–∞–Ω—ñ, —è–∫—â–æ –≤–æ–Ω–∏ —â–µ –Ω–µ –ø—Ä–æ—Å—Ç—Ä–æ—á–µ–Ω—ñ.

        :param key: –£–Ω—ñ–∫–∞–ª—å–Ω–∏–π –∫–ª—é—á –∫–µ—à—É (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —à–ª—è—Ö –¥–æ —Ç–æ–≤–∞—Ä—É)
        :param ttl: –ß–∞—Å –∂–∏—Ç—Ç—è –∫–µ—à—É (–≤ —Å–µ–∫—É–Ω–¥–∞—Ö)
        :return: –î–∞–Ω—ñ –∑ –∫–µ—à—É –∞–±–æ None, —è–∫—â–æ –Ω–µ–º–∞—î –∞–±–æ –ø—Ä–æ—Å—Ç—Ä–æ—á–µ–Ω–æ
        """
        cached = self._cache.get(key)
        if cached and time.time() - cached.get("time", 0) < ttl:
            return cached
        return None

    def set(self, key: str, data: dict) -> None:
        """
        üíæ –ó–±–µ—Ä—ñ–≥–∞—î –æ–±'—î–∫—Ç —É –∫–µ—à –∑ –º—ñ—Ç–∫–æ—é —á–∞—Å—É.

        :param key: –ö–ª—é—á –∫–µ—à—É
        :param data: –î–∞–Ω—ñ –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è
        """
        data["time"] = time.time()
        self._cache[key] = data
