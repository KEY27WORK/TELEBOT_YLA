# üìÑ app/domain/web/interfaces.py
"""
üìÑ –ö–æ–Ω—Ç—Ä–∞–∫—Ç–∏ –≤–µ–±-—Ä—ñ–≤–Ω—è –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è HTML-—Å—Ç–æ—Ä—ñ–Ω–æ–∫.

üîπ –í–∏–∑–Ω–∞—á–∞—î –ø—Ä–æ—Ç–æ–∫–æ–ª `IWebClient`, —è–∫–∏–π —ñ–Ω–∫–∞–ø—Å—É–ª—é—î —Ä–æ–±–æ—Ç—É –∑ –±—Ä–∞—É–∑–µ—Ä–∞–º–∏/HTTP-–∫–ª—ñ—î–Ω—Ç–∞–º–∏.
üîπ –§—ñ–∫—Å—É—î –Ω–∞–±—ñ—Ä –æ–ø—Ü—ñ–π, —â–æ –¥–æ–∑–≤–æ–ª—è—é—Ç—å —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è–º –ø—Ä–∏–π–º–∞—Ç–∏ per-call overrides (timeout, user-agent —Ç–æ—â–æ).
"""

from __future__ import annotations

# üî† –°–∏—Å—Ç–µ–º–Ω—ñ —ñ–º–ø–æ—Ä—Ç–∏
import logging                                                           # üßæ –õ–æ–≥—É–≤–∞–Ω–Ω—è —Ñ–∞–∫—Ç—É —ñ–º–ø–æ—Ä—Ç—É/—ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó –ø—Ä–æ—Ç–æ–∫–æ–ª—É
from typing import Any, Literal, Optional, Protocol                      # üß∞ –ë–∞–∑–æ–≤—ñ —Ç–∏–ø–∏ –π Protocol –¥–ª—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ñ–≤

# ================================
# ü™µ –õ–û–ì–ï–† –ú–û–î–£–õ–Ø
# ================================
logger = logging.getLogger(__name__)                                     # üßæ –°—Ç–≤–æ—Ä—é—î–º–æ –º–æ–¥—É–ª—å–Ω–∏–π –ª–æ–≥–µ—Ä
WaitUntilStage = Literal["commit", "domcontentloaded", "load", "networkidle"]  # ‚è±Ô∏è –î–æ–ø—É—Å—Ç–∏–º—ñ —Å—Ç–∞–¥—ñ—ó –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏


# ================================
# üåê –ü–†–û–¢–û–ö–û–õ –í–ï–ë-–ö–õ–Ü–Ñ–ù–¢–ê
# ================================
class IWebClient(Protocol):
    """
    –£–∑–∞–≥–∞–ª—å–Ω–µ–Ω–∏–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç –≤–µ–±-–∫–ª—ñ—î–Ω—Ç–∞:
    —Å—Ç–∞—Ä—Ç—É—î —Ä–µ—Å—É—Ä—Å–∏, –∑–∞–≤–µ—Ä—à—É—î —ó—Ö —ñ –ø–æ–≤–µ—Ä—Ç–∞—î HTML –∑–∞ URL –∑ –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏.
    """

    async def startup(self) -> None:
        """–Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î –≤—Å—ñ –ø–æ—Ç—Ä—ñ–±–Ω—ñ —Ä–µ—Å—É—Ä—Å–∏ (–±—Ä–∞—É–∑–µ—Ä, HTTP-—Å–µ—Å—ñ—ó, –ø—É–ª, –∫–µ—à)."""
        ...

    async def shutdown(self) -> None:
        """–ì—Ä–µ–π—Å—Ñ—É–ª-–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è: –∑–∞–∫—Ä–∏—Ç—Ç—è –±—Ä–∞—É–∑–µ—Ä–∞, HTTP-—Å–µ—Å—ñ–π, –æ—á–∏—â–µ–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤."""
        ...

    async def get_page_content(self, url: str, **kwargs: Any) -> Optional[str]:
        """
        –ü–æ–≤–µ—Ä—Ç–∞—î HTML-—Ä—è–¥–æ–∫ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –∞–±–æ `None`, —è–∫—â–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –Ω–µ –≤–¥–∞–ª–æ—Å—è.

        Args:
            url: –ú–µ—Ç–∞-–∞–¥—Ä–µ—Å–∞ (HTTP/HTTPS), —è–∫—É –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏.
            **kwargs: –û–ø—Ü—ñ–π–Ω—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏, —è–∫—ñ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –º–æ–∂–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏:
                ‚Ä¢ wait_until: WaitUntilStage ‚Äî —Å—Ç–∞–¥—ñ—è DOM, –Ω–∞ —è–∫—ñ–π –∑—É–ø–∏–Ω—è—Ç–∏—Å—è.
                ‚Ä¢ timeout_ms: int ‚Äî —Ç–∞–π–º–∞—É—Ç —É –º—ñ–ª—ñ—Å–µ–∫—É–Ω–¥–∞—Ö.
                ‚Ä¢ retries: int ‚Äî –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ–≤—Ç–æ—Ä—ñ–≤ –∑–∞–ø–∏—Ç—É.
                ‚Ä¢ retry_delay_sec: int ‚Äî –ø–∞—É–∑–∞ –º—ñ–∂ –ø–æ–≤—Ç–æ—Ä–Ω–∏–º–∏ —Å–ø—Ä–æ–±–∞–º–∏.
                ‚Ä¢ use_stealth: bool ‚Äî —á–∏ –≤–º–∏–∫–∞—Ç–∏ anti-bot —Ä–µ–∂–∏–º–∏.
                ‚Ä¢ user_agent: str ‚Äî –∫–∞—Å—Ç–æ–º–Ω–∏–π User-Agent.

        Returns:
            HTML —Å—Ç–æ—Ä—ñ–Ω–∫–∏ —è–∫ `str`, –∞–±–æ `None`, —è–∫—â–æ –≤—Å—ñ —Å–ø—Ä–æ–±–∏ –∑–∞–≤–µ—Ä—à–∏–ª–∏—Å—è –Ω–µ–≤–¥–∞—á–µ—é.
        """
        ...


logger.debug("üß≠ IWebClient –ø—Ä–æ—Ç–æ–∫–æ–ª –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ")                       # üß≠ –§—ñ–∫—Å—É—î–º–æ —Ñ–∞–∫—Ç —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É
