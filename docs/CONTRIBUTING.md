# ü§ù CONTRIBUTING.md ‚Äî —è–∫ –∫–æ–Ω—Ç—Ä–∏–±‚Äô—é—Ç–∏—Ç–∏ –≤ –ø—Ä–æ—î–∫—Ç

–î—è–∫—É—î–º–æ, —â–æ —Ö–æ—á–µ—à –¥–æ–ø–æ–º–æ–≥—Ç–∏! –¢—É—Ç –æ–ø–∏—Å–∞–Ω–æ, —è–∫ –≥–æ—Ç—É–≤–∞—Ç–∏ –∑–º—ñ–Ω–∏, –æ—Ñ–æ—Ä–º–ª—é–≤–∞—Ç–∏ –∫–æ–¥ —ñ —Ä–æ–±–∏—Ç–∏ Pull Request —Ç–∞–∫, —â–æ–± —É—Å–µ –∑–ª–∏–≤–∞–ª–æ—Å—è –≥–ª–∞–¥–∫–æ.

---

## üß≠ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

1. –°—Ç–≤–æ—Ä–∏ –≥—ñ–ª–∫—É –≤—ñ–¥ `main`:
   ```bash
   git checkout -b feat/short-branch-name
   ```
2. –í—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:
   ```bash
   poetry install
   ```
3. –°–∫–æ–ø—ñ—é–π `.env` —ñ –¥–æ–¥–∞–π –∫–ª—é—á—ñ (–¥–∏–≤. `README.md`):
   ```text
   OPENAI_API_KEY=...
   TELEGRAM_BOT_TOKEN=...
   ```
4. –ó–∞–ø—É—Å—Ç–∏ –±–æ—Ç–∞ –ª–æ–∫–∞–ª—å–Ω–æ:
   ```bash
   poetry run python app/bot/main.py
   ```

---

## üß± –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω—ñ –º–µ–∂—ñ

–ú–∏ –¥–æ—Ç—Ä–∏–º—É—î–º–æ—Å—å 4-—à–∞—Ä–æ–≤–æ—ó –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏:

- **domain** ‚Äî —á–∏—Å—Ç–µ —è–¥—Ä–æ, –¢–Ü–õ–¨–ö–ò –º–æ–¥–µ–ª—ñ/–ø—Ä–∞–≤–∏–ª–∞. –ë–µ–∑ IO/HTTP/—Ñ–∞–π–ª—ñ–≤.
- **infrastructure** ‚Äî —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó (OpenAI, –ø–∞—Ä—Å–µ—Ä–∏, WebDriver, –∫–µ—à, delivery).
- **bot** ‚Äî UI/Telegram (handlers, formatters, messengers, keyboards).
- **config** ‚Äî DI/–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, YAML-–∫–æ–Ω—Ñ—ñ–≥–∏, –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∏.
- **errors** ‚Äî —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –≤–∏–Ω—è—Ç–∫—ñ–≤.
- **shared** ‚Äî —É—Ç–∏–ª—ñ—Ç–∏/–ø—Ä–æ–º–ø—Ç–∏/—Ö–µ–ª–ø–µ—Ä–∏.

> üìå –ë—É–¥—å-—è–∫–∏–π –Ω–æ–≤–∏–π –∫–æ–¥ –º–∞—î —á—ñ—Ç–∫–æ ¬´–ø–æ—Ç—Ä–∞–ø–ª—è—Ç–∏¬ª —É –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–π —à–∞—Ä. Domain ‚Äî –Ω—É–ª—å –∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π.

---

## üé® –°—Ç–∏–ª—å –∫–æ–¥—É (–∫–æ—Ä–æ—Ç–∫–æ)

- –ö–æ–∂–µ–Ω —Ñ–∞–π–ª –ø–æ—á–∏–Ω–∞—î—Ç—å—Å—è –∑ emoji-—à–∞–ø–∫–∏ —Ç–∞ docstring —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é.
- –Ü–º–ø–æ—Ä—Ç–∏ —É 3 –≥—Ä—É–ø–∞—Ö:
  1. üåê –ó–æ–≤–Ω—ñ—à–Ω—ñ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏
  2. üî† –°–∏—Å—Ç–µ–º–Ω—ñ —ñ–º–ø–æ—Ä—Ç–∏
  3. üß© –í–Ω—É—Ç—Ä—ñ—à–Ω—ñ –º–æ–¥—É–ª—ñ –ø—Ä–æ—î–∫—Ç—É
- –í–µ–ª–∏–∫—ñ –±–ª–æ–∫–∏ –∫–æ–¥—É ‚Äî —á–µ—Ä–µ–∑ ¬´–∑–∞–±–æ—Ä¬ª:
  ```python
  # ================================
  # üèõÔ∏è –ù–ê–ó–í–ê –°–ï–ö–¶–Ü–á
  # ================================
  ```
- Docstrings ‚Äî —É Google-style —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é.
- –¢–∏–ø—ñ–∑–∞—Ü—ñ—è ‚Äî –≤—Å—é–¥–∏.
- –õ–æ–≥–∏ ‚Äî —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é, –∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º.
- –¢–µ–∫—Å—Ç–∏/–∫–æ–Ω—Å—Ç–∞–Ω—Ç–∏ ‚Äî —É `static_messages.py` / `constants.py`.

–î–µ—Ç–∞–ª—å–Ω–æ ‚Äî —É `STYLEGUIDE.md`.

---

## üß™ –¢–µ—Å—Ç–∏

- –ü–∏—à–µ–º–æ unit/integration-—Ç–µ—Å—Ç–∏, –º–æ–∫–∞—è –∑–æ–≤–Ω—ñ—à–Ω—ñ —Å–µ—Ä–≤—ñ—Å–∏.
- –î–ª—è —Å—Ç–∞–±—ñ–ª—å–Ω–æ—Å—Ç—ñ AI-–∫–æ–Ω—Ç–µ–Ω—Ç—É –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ snapshot-—Ç–µ—Å—Ç–∏ (–¥–∏–≤. IMP-024).
- –Ü–º–µ–Ω–∞: `tests/.../test_*.py`, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∑–µ—Ä–∫–∞–ª–∏—Ç—å `app/...`.

---

## üîÄ –ì—ñ–ª–∫–∏ —Ç–∞ Pull Requests

- –Ü–º–µ–Ω—É–≤–∞–Ω–Ω—è –≥—ñ–ª–æ–∫:  
  - `feat/*` ‚Äî –Ω–æ–≤—ñ —Ñ—ñ—á—ñ  
  - `fix/*` ‚Äî –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è  
  - `imp/*` ‚Äî –Ω–µ–≤–µ–ª–∏–∫—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è  
  - `docs/*` ‚Äî –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è  
  - `chore/*` ‚Äî —Ä—É—Ç–∏–Ω–∞
- –û–¥–∏–Ω PR ‚Äî –æ–¥–Ω–∞ –ª–æ–≥—ñ—á–Ω–∞ –∑–º—ñ–Ω–∞.
- –í –æ–ø–∏—Å—ñ PR –≤–∫–∞–∑—É—î–º–æ **–Ω–æ–º–µ—Ä IMP-–∑–∞–¥–∞—á—ñ**:
  ```text
  IMP-060: Docs ‚Äî CONTRIBUTING.md + STYLEGUIDE.md
  ```
- –ß–µ–∫-–ª–∏—Å—Ç —É PR:
  - [ ] –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω—ñ –º–µ–∂—ñ –¥–æ—Ç—Ä–∏–º–∞–Ω–æ
  - [ ] Docstrings/—Ç–∏–ø–∏/–ª–æ–≥–∏ ‚Üí –∑–∞ –≥–∞–π–¥–æ–º
  - [ ] –¢–µ–∫—Å—Ç–∏/–∫–æ–Ω—Å—Ç–∞–Ω—Ç–∏ –Ω–µ –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω—ñ
  - [ ] –¢–µ—Å—Ç–∏/—Å–Ω–∞–ø—à–æ—Ç–∏ –æ–Ω–æ–≤–ª–µ–Ω—ñ
  - [ ] –õ—ñ–Ω—Ç–µ—Ä–∏/—Ñ–æ—Ä–º–∞—Ç–µ—Ä–∏ –ø—Ä–æ–π—à–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ

---

## üíæ –§–æ—Ä–º–∞—Ç –∫–æ–º—ñ—Ç—ñ–≤ (Conventional Commits)

–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –∑–≤–∏—á–Ω—ñ —Ç–∏–ø–∏ + –º–æ–∂–Ω–∞ —Å—Ç–∞–≤–∏—Ç–∏ emoji:

- `feat:` ‚Äî –Ω–æ–≤–∞ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å (‚ú®)
- `fix:` ‚Äî –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è (üêõ)
- `docs:` ‚Äî –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è (üìù)
- `style:` ‚Äî —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è/—Å—Ç–∞–π–ª (üé®)
- `refactor:` ‚Äî –∑–º—ñ–Ω–∏ –±–µ–∑ –∑–º—ñ–Ω–∏ –ø–æ–≤–µ–¥—ñ–Ω–∫–∏ (‚ôªÔ∏è)
- `test:` ‚Äî —Ç–µ—Å—Ç–∏ (‚úÖ)
- `chore:` ‚Äî —Ä—É—Ç–∏–Ω–∞/–∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ (üîß)
- `imp:` ‚Äî –Ω–µ–≤–µ–ª–∏–∫—ñ –ø–æ–ª—ñ–ø—à–µ–Ω–Ω—è/IMP-—Ç–∞—Å–∫–∏ (‚öôÔ∏è)

**–ü—Ä–∏–∫–ª–∞–¥:**
```text
imp: IMP-059 collect diagnostics in ProcessedProductData
docs: IMP-060 add CONTRIBUTING and style rules
feat: IMP-042 add YoungLA EU price parser
```

---

## üõ°Ô∏è –ü–µ—Ä–µ–≤—ñ—Ä–∫–∏ –ø–µ—Ä–µ–¥ –ø—É—à–µ–º

–†–µ–∫–æ–º–µ–Ω–¥—É—î–º–æ –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏ `pre-commit` —ñ –ø—Ä–æ–≥–∞–Ω—è—Ç–∏ —Ñ–æ—Ä–º–∞—Ç–µ—Ä–∏/–ª—ñ–Ω—Ç–µ—Ä–∏ –¥–æ –ø—É—à—É.

`.pre-commit-config.yaml` (–ø—Ä–∏–∫–ª–∞–¥):

```yaml
repos:
  - repo: https://github.com/astral-sh/ruff-pre-commit
    rev: v0.6.9
    hooks:
      - id: ruff
        args: ["--fix"]
      - id: ruff-format
  - repo: https://github.com/psf/black
    rev: 24.10.0
    hooks:
      - id: black
```

`pyproject.toml` (—É—Ä–∏–≤–æ–∫):

```toml
[tool.black]
line-length = 100
target-version = ["py311"]

[tool.ruff]
line-length = 100
target-version = "py311"
select = ["E","F","I","UP","B","C4","T20"]
ignore = ["E203","E501"]
fix = true
unsafe-fixes = true

[tool.ruff.lint.isort]
known-first-party = ["app"]
section-order = ["future","third-party","stdlib","first-party","local-folder"]
```

---

## üß© –î–µ —â–æ –ª–µ–∂–∏—Ç—å —ñ —è–∫ –¥–æ–¥–∞–≤–∞—Ç–∏

- **–ü–∞—Ä—Å–µ—Ä–∏** ‚Üí `app/infrastructure/parsers/‚Ä¶`  
  - –Ω–æ–≤—ñ –µ–∫—Å—Ç—Ä–∞–∫—Ç–æ—Ä–∏ ‚Äî —É `parsers/extractors/*`
  - –æ–ø—Ü—ñ—ó ‚Äî —á–µ—Ä–µ–∑ `ParserInfraOptions`
  - –Ω–µ –≤–∞–ª–∏–º–æ –ø–∞–π–ø–ª–∞–π–Ω, —Ä–æ–±–∏–º–æ fallback
- **DTO** ‚Üí `app/domain/.../dto.py` –∞–±–æ `app/domain/.../interfaces.py`
  - –Ω–∞–∑–≤–∏ —É —Ñ–æ—Ä–º–∞—Ç—ñ `SomethingDTO`, `SomethingInput`, `SomethingResult`
- **UI-—Ñ–æ—Ä–º–∞—Ç–µ—Ä–∏** ‚Üí `app/bot/ui/formatters/*`
  - —Ç—ñ–ª—å–∫–∏ –±–µ–∑–ø–µ—á–Ω–µ HTML-—Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è
  - –∂–æ–¥–Ω–æ—ó –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∏

---

## üÜò –¢—Ä–±–ª—à—É—Ç—ñ–Ω–≥

- **Cloudflare / 429** ‚Üí –¥–∏–≤. `config/yamls/base/60_playwright.yaml` (retries, timeout, user-agent).
- **–ü–æ—Ä–æ–∂–Ω—ñ —Å–µ–∫—Ü—ñ—ó –æ–ø–∏—Å—É** ‚Üí –ø–µ—Ä–µ–≤—ñ—Ä `15_parser_selectors.yaml` + fallback-–ª–æ–≥—ñ–∫—É –≤ –µ–∫—Å—Ç—Ä–∞–∫—Ç–æ—Ä–∞—Ö.
- **–í–∞–≥–∞ = 0 –≥** ‚Üí –ø–µ—Ä–µ–≤—ñ—Ä `WeightResolver` + –¥–∂–µ—Ä–µ–ª–∞/AI.
- **–ù–µ–º–∞—î –∫–æ–Ω—Ç–µ–Ω—Ç—É/—Ö–µ—à—Ç–µ–≥—ñ–≤** ‚Üí –¥–∏–≤. `infrastructure/content/*` + –∞–¥–∞–ø—Ç–µ—Ä —Ö–µ—à—Ç–µ–≥—ñ–≤.

---

## üì¶ IMP-—Ç–∞—Å–∫–∏

–£ –ø—Ä–æ—î–∫—Ç—ñ –º–∏ –≤–µ–¥–µ–º–æ –¥—Ä—ñ–±–Ω—ñ –ø–æ–ª—ñ–ø—à–µ–Ω–Ω—è —è–∫ `IMP-0xx`.  
–ü—Ä–∏–∫–ª–∞–¥:

```yaml
- id: IMP-059
  priority: P2
  type: improvement
  status: done ‚úÖ
  title: "–°–±–æ—Ä –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫ –≤ ProcessedProductData"
  scope: ["infrastructure/services/product_processing_service.py"]
  details: "diagnostics: {'images_count': n, 'has_size_chart': bool, 'ocr_status': 'ok/..'}"
  acceptance:
    - "UI –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å health-–∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã."
```

–Ø–∫—â–æ —Ç–∏ –∑–∞–∫—Ä–∏–≤ —Ç–∞–∫—É –∑–∞–¥–∞—á—É ‚Äî **–æ–¥—Ä–∞–∑—É** –æ–Ω–æ–≤–∏ —Å—Ç–∞—Ç—É—Å –≤ changelog/roadmap —ñ –ø–æ—Å–∏–ª–∞–π—Å—è –Ω–∞ –Ω–µ—ó –≤ –∫–æ–º—ñ—Ç—ñ:
```text
imp: IMP-059 add health diagnostics to ProcessedProductData
```

---

## ‚úÖ –©–æ –≤–≤–∞–∂–∞—î—Ç—å—Å—è ¬´–≥–æ—Ç–æ–≤–∏–º¬ª

- –ö–æ–¥ –ª–µ–∂–∏—Ç—å —É –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É —à–∞—Ä—ñ (domain/infra/bot/config/errors/shared).
- –Ñ —à–∞–ø–∫–∞, docstring, —ñ–º–ø–æ—Ä—Ç–∏ ‚Äî –∑–∞ –≥–∞–π–¥–æ–º.
- –ù–µ–º–∞—î –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–∏—Ö —Ç–µ–∫—Å—Ç—ñ–≤ ‚Äî –≤–∏–Ω–µ—Å–µ–Ω–æ –≤ —Ä–µ—Å—É—Ä—Å–∏.
- –Ñ —Ç–µ—Å—Ç–∏ –∞–±–æ –∑—Ä–æ–∑—É–º—ñ–ª–æ, —á–æ–º—É —ó—Ö –Ω–µ–º–∞.
- PR –ø–æ—Å–∏–ª–∞—î—Ç—å—Å—è –Ω–∞ IMP.
- –õ—ñ–Ω—Ç–µ—Ä–∏/—Ñ–æ—Ä–º–∞—Ç–µ—Ä–∏ –ø—Ä–æ–π—à–ª–∏.

---

–î—è–∫—É—î–º–æ –∑–∞ –≤–Ω–µ—Å–æ–∫! üôå
