# üé® ui ‚Äî Telegram Presentation Layer
–ü–∞–∫–µ—Ç **`app/bot/ui`** —Ä–µ–∞–ª—ñ–∑—É—î —à–∞—Ä –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è: —Ç—É—Ç –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è —Å—Ç–∞—Ç–∏—á–Ω—ñ —Ç–µ–∫—Å—Ç–∏, —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä–∏ HTML, –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∏ —Ç–∞ –º–µ—Å–µ–Ω–¥–∂–µ—Ä–∏, —è–∫—ñ —Ñ–∞–∫—Ç–∏—á–Ω–æ —Å–ø—ñ–ª–∫—É—é—Ç—å—Å—è –∑ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º —É Telegram.

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞
```bash
ui/
‚îú‚îÄ‚îÄ üìò README.md
‚îú‚îÄ‚îÄ üìÑ __init__.py             # —Ñ–∞—Å–∞–¥–Ω—ñ —ñ–º–ø–æ—Ä—Ç–∏ (Keyboard, ProductMessenger, MessageFormatter‚Ä¶)
‚îú‚îÄ‚îÄ üìÑ static_messages.py      # —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ —Ç–µ–∫—Å—Ç–æ–≤—ñ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∏
‚îú‚îÄ‚îÄ üìÑ error_presenter.py      # –ø–æ–±—É–¥–æ–≤–∞ –ª–æ–∫–∞–ª—ñ–∑–æ–≤–∞–Ω–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –ø—Ä–æ –ø–æ–º–∏–ª–∫–∏
‚îú‚îÄ‚îÄ üìÇ formatters              # HTML-—Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è (–¥–∏–≤. –ª–æ–∫–∞–ª—å–Ω–∏–π README)
‚îú‚îÄ‚îÄ üìÇ keyboards               # –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∏ Reply/Inline –∫–ª–∞–≤—ñ–∞—Ç—É—Ä
‚îî‚îÄ‚îÄ üìÇ messengers              # –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è –∫–∞—Ä—Ç–æ–∫, –∑–≤—ñ—Ç—ñ–≤, —Ç–∞–±–ª–∏—Ü—å —Ä–æ–∑–º—ñ—Ä—ñ–≤
```

---

## üß≠ –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è
- –ù–∞–¥–∞–≤–∞—Ç–∏ —É–∑–≥–æ–¥–∂–µ–Ω—ñ UI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ (–ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∏, –º–µ–¥—ñ–∞) –¥–ª—è –≤—Å—ñ—Ö —Ö–µ–Ω–¥–ª–µ—Ä—ñ–≤ –±–æ—Ç–∞.
- –¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —Ç–µ–∫—Å—Ç–∏ (`static_messages.py`) —Ç–∞ –ø–æ–º–∏–ª–∫–∏ (`error_presenter.py`), —â–æ–± —É–Ω–∏–∫–∞—Ç–∏ ‚Äú–º–∞–≥—ñ—á–Ω–∏—Ö —Ä—è–¥–∫—ñ–≤‚Äù.
- –Ü–Ω–∫–∞–ø—Å—É–ª—é–≤–∞—Ç–∏ —Å–∫–ª–∞–¥–Ω—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ (–∞–ª—å–±–æ–º–∏, size-chart, –∑–≤—ñ—Ç–∏ –ø–æ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ) —É –º–µ—Å–µ–Ω–¥–∂–µ—Ä–∞—Ö –∑ –ø–æ–≤—Ç–æ—Ä–Ω–∏–º –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º `ImageSender`.
- –ó–∞–±–µ–∑–ø–µ—á–∏—Ç–∏ –º—ñ—Å—Ü–µ –¥–ª—è —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä—ñ–≤ HTML, —è–∫—ñ –ø—Ä–∞—Ü—é—é—Ç—å —ñ–∑ `parse_mode="HTML"` –∑–∞ –ø—Ä–∞–≤–∏–ª–æ–º SRP.

---

## üß© –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏
- **`static_messages.py`** ‚Äî –≤—Å—ñ UX-—Ä—è–¥–∫–∏ (`HELP_*`, `MENU_*`, `ERROR_*`, —Ç–æ—â–æ) —è–∫ `Final[str]`.
- **`error_presenter.py`** ‚Äî –±—É–¥—É—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤—ñ `ReasonCode`: –æ–±–∏—Ä–∞—î —Ç–µ–∫—Å—Ç —ñ–∑ `static_messages` —ñ –¥–æ–¥–∞—î –ø–æ—Ä–∞–¥—É –∑ `_NEXT_TIPS`.
- **`formatters/`** ‚Äî –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î DTO –Ω–∞ HTML (–¥–µ—Ç–∞–ª—ñ –≤ `formatters/README.md`).
- **`keyboards/`** ‚Äî —Ñ–æ—Ä–º—É—î Reply/Inline –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∏ (–¥–∏–≤. `keyboards/README.md`).
- **`messengers/`** ‚Äî –æ—Ä–∫–µ—Å—Ç—Ä—É—î –≤—ñ–¥–ø—Ä–∞–≤–∫—É –∫–∞—Ä—Ç–æ–∫ —Ç–æ–≤–∞—Ä—ñ–≤, –∑–≤—ñ—Ç—ñ–≤ –ø—Ä–æ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å, —Ç–∞–±–ª–∏—Ü—å —Ä–æ–∑–º—ñ—Ä—ñ–≤.

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è —Ç–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∏
- `AppConstants.UI.DEFAULT_PARSE_MODE`, `UI.REPLY_BUTTONS`, `UI.INLINE_BUTTONS` ‚Äî —Ç–µ–∫—Å—Ç–∏ –π –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è parse_mode.
- `AppConstants.CALLBACKS.*` ‚Äî —Ñ–∞–±—Ä–∏–∫–∏ `CallbackData` –¥–ª—è –∫–Ω–æ–ø–æ–∫.
- `ReasonCode` (`app/errors/reason_codes.py`) ‚Äî –¥–∂–µ—Ä–µ–ª–æ —Ç–∏–ø—ñ–≤ –ø–æ–º–∏–ª–æ–∫ –¥–ª—è `error_presenter.py`.
- –ó–æ–≤–Ω—ñ—à–Ω—ñ —Å–µ—Ä–≤—ñ—Å–∏: `ImageSender`, `SizeChartHandlerBot`, `MusicSender`, —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä–∏ –∑ `formatters/`.

---

## üöÄ –ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
```python
from app.bot.ui import Keyboard, ProductMessenger, MessageFormatter

keyboard = Keyboard(app_constants)

await update.message.reply_text(
    msg.HELP_WELCOME_SHORT,
    reply_markup=keyboard.build_main_menu(),
)

product_messenger = ProductMessenger(
    music_sender=music_sender,
    size_chart_handler=size_chart_handler,
    formatter=MessageFormatter(),
    image_sender=image_sender,
    exception_handler=exception_handler,
    constants=app_constants,
)

await product_messenger.send(update, context, processed_product)
```

---

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è
- –ú–æ–∫—É–π—Ç–µ `python-telegram-bot` (`Update`, `Message`, `InlineKeyboardMarkup`) —Ç–∞ –ø–µ—Ä–µ–≤—ñ—Ä—è–π—Ç–µ, —â–æ –≤—Å—ñ reply/inline –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∏ –º—ñ—Å—Ç—è—Ç—å –æ—á—ñ–∫—É–≤–∞–Ω—ñ —Ç–µ–∫—Å—Ç–∏.
- –î–ª—è —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä—ñ–≤ —Ä–æ–±—ñ—Ç—å snapshot-—Ç–µ—Å—Ç–∏ HTML —Ç–∞ –ø–µ—Ä–µ–≤—ñ—Ä—è–π—Ç–µ –µ–∫—Ä–∞–Ω—É–≤–∞–Ω–Ω—è.
- –î–ª—è `error_presenter.build_error_message()` –ø–µ—Ä–µ–≤—ñ—Ä—è–π—Ç–µ –º–∞–ø—ñ–Ω–≥–∏ `ReasonCode ‚Üí static_messages`.
- –î–ª—è –º–µ—Å–µ–Ω–¥–∂–µ—Ä—ñ–≤ –ø—ñ–¥–º—ñ–Ω—è–π—Ç–µ `ImageSender`, `MusicSender`, `SizeChartHandlerBot`, —â–æ–± –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø–æ—Ä—è–¥–æ–∫ –≤–∏–∫–ª–∏–∫—ñ–≤ —ñ fallback-–ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è.

---

## ‚úÖ –ü—Ä–∏–º—ñ—Ç–∫–∏
- –í—Å—ñ –Ω–æ–≤—ñ UI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç—É–≤–∞—Ç–∏ –≤ —ó—Ö–Ω—ñ—Ö README, –∞ —Ç–µ–∫—Å—Ç–∏ –¥–æ–¥–∞–≤–∞—Ç–∏ –¥–æ `static_messages.py`.
- –ù–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ ‚Äú–º–∞–≥—ñ—á–Ω—ñ —Ä—è–¥–∫–∏‚Äù –¥–ª—è –ø–æ–º–∏–ª–æ–∫ –∞–±–æ –∫–Ω–æ–ø–æ–∫ ‚Äî –±–µ—Ä—ñ—Ç—å –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∏ –∑ —Ü—å–æ–≥–æ –ø–∞–∫–µ—Ç–∞.
- –ü—Ä–∏ –¥–æ–¥–∞–≤–∞–Ω–Ω—ñ –Ω–æ–≤–æ–≥–æ –º–µ—Å–µ–Ω–¥–∂–µ—Ä–∞/—Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä–∞/–∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∏ –æ–Ω–æ–≤—ñ—Ç—å —Ñ–∞—Å–∞–¥–Ω—ñ —ñ–º–ø–æ—Ä—Ç–∏ –≤ `__init__.py`.
