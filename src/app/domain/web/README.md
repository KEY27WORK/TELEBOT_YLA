# üåê Domain ¬∑ Web

–ö–æ–Ω—Ç—Ä–∞–∫—Ç–∏ –¥–ª—è –¥–æ—Å—Ç—É–ø—É –¥–æ –≤–µ–±‚Äë—Å—Ç–æ—Ä—ñ–Ω–æ–∫ (—á–∏—Å—Ç–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞).  
–¢—É—Ç **–Ω–µ–º–∞—î** –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π –≤—ñ–¥ Playwright/httpx —Ç–æ—â–æ ‚Äî –ª–∏—à–µ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏.

## üì¶ –°–∫–ª–∞–¥
```bash
app/domain/web
‚îú‚îÄ __init__.py
‚îî‚îÄ interfaces.py   ‚Üê IWebClient (–∫–æ–Ω—Ç—Ä–∞–∫—Ç –∫–ª—ñ—î–Ω—Ç–∞ –≤–µ–±‚Äë—Å—Ç–æ—Ä—ñ–Ω–æ–∫)
```

## üîå –ö–æ–Ω—Ç—Ä–∞–∫—Ç: `IWebClient`
–Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å, —è–∫–∏–π –º–∞—î —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –±—É–¥—å‚Äë—è–∫–∞ —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (Playwright, httpx, Selenium, ‚Ä¶).

```python
class IWebClient(Protocol):
    async def startup(self) -> None: ...
    async def shutdown(self) -> None: ...
    async def get_page_content(self, url: str) -> Optional[str]: ...
```

### –ü–æ–≤–µ–¥—ñ–Ω–∫–∞ –∑–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–º
- **`startup()`** ‚Äî –≤–∏–¥—ñ–ª–µ–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤ (–∑–∞–ø—É—Å–∫ –±—Ä–∞—É–∑–µ—Ä–∞/—Å–µ—Å—ñ—ó).
- **`shutdown()`** ‚Äî –∫–æ—Ä–µ–∫—Ç–Ω–µ –∑–≤—ñ–ª—å–Ω–µ–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤.
- **`get_page_content(url)`** ‚Äî –ø–æ–≤–µ—Ä—Ç–∞—î —Ñ—ñ–Ω–∞–ª—å–Ω–∏–π HTML —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –∞–±–æ `None` —É —Ä–∞–∑—ñ –Ω–µ–≤–¥–∞—á—ñ.
  –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –º–æ–∂–µ –º—ñ—Å—Ç–∏—Ç–∏ —Ä–µ—Ç—Ä–∞—ó, –∞–Ω—Ç–∏–±–æ—Ç‚Äë–æ–±—Ö—ñ–¥ —Ç–æ—â–æ ‚Äî —Ü–µ **–¥–µ—Ç–∞–ª—ñ —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏**.

## üß∞ –ü—Ä–∏–∫–ª–∞–¥ —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω–æ—ó —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó
–í —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ñ (`app/infrastructure/web/webdriver_service.py`) —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ `WebDriverService`, —è–∫–∏–π:
- –ø—Ä–∞—Ü—é—î –ø–æ–≤–µ—Ä—Ö **Playwright**,
- –º–∞—î —è–≤–Ω—ñ `startup()/shutdown()`,
- –≤–∫–ª—é—á–∞—î **stealth** —Ç–∞ **—Ä–µ—Ç—Ä–∞—ó**,
- —Ä–µ–∞–ª—ñ–∑—É—î –∫–æ–Ω—Ç—Ä–∞–∫—Ç `IWebClient`.

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è
–ó–∞–≤–¥—è–∫–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É –º–æ–∂–Ω–∞ –ª–µ–≥–∫–æ –ø—ñ–¥–º—ñ–Ω—è—Ç–∏ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é —É —Ç–µ—Å—Ç–∞—Ö:
```python
class FakeWebClient(IWebClient):
    async def startup(self): pass
    async def shutdown(self): pass
    async def get_page_content(self, url: str) -> Optional[str]:
        return "<html>fixture</html>"
```
–ü—ñ–¥—Å—É–Ω—å—Ç–µ `FakeWebClient` —É –ø–∞—Ä—Å–µ—Ä ‚Äî —ñ —Ç–µ—Å—Ç—É–π—Ç–µ –±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –±—Ä–∞—É–∑–µ—Ä–∞.

## üîó –î–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è
–£—Å—ñ –ø–∞—Ä—Å–µ—Ä–∏/—Å–µ—Ä–≤—ñ—Å–∏, —è–∫–∏–º –ø–æ—Ç—Ä—ñ–±–µ–Ω HTML, –º–∞—é—Ç—å –∑–∞–ª–µ–∂–∞—Ç–∏ **–≤—ñ–¥ `IWebClient`**, –∞ –Ω–µ –≤—ñ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ Playwright‚Äë—Å–µ—Ä–≤—ñ—Å—É. –¶–µ —Ä–æ–±–∏—Ç—å –∫–æ–¥ –≥–Ω—É—á–∫–∏–º —ñ –∑–∞–º—ñ–Ω–Ω–∏–º.
