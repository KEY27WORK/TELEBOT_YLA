# üîÅ app/shared/utils/collections.py
"""
üîÅ –£—Ç–∏–ª—ñ—Ç–∏ –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –∫–æ–ª–µ–∫—Ü—ñ—è–º–∏ –∑ –≤–∏–∑–Ω–∞—á–µ–Ω–∏–º –ø–æ—Ä—è–¥–∫–æ–º.

üîπ –ü—Ä–∏–±–∏—Ä–∞—î –¥—É–±–ª—ñ–∫–∞—Ç–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏, –∑–±–µ—Ä—ñ–≥–∞—é—á–∏ –ø–æ—Ä—è–¥–æ–∫ –ø–æ—è–≤–∏.
üîπ –í—ñ–¥–∫–∏–¥–∞—î –ø–æ—Ä–æ–∂–Ω—ñ –∞–±–æ ¬´—Ñ–∞–ª—å—à–∏–≤—ñ¬ª –∑–Ω–∞—á–µ–Ω–Ω—è (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `None`, `""`, `0`).
üîπ –ú–æ–∂–µ –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ –∞–±–æ –∫–æ—Ä—Ç–µ–∂ –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞.
"""

from __future__ import annotations

# üî† –°–∏—Å—Ç–µ–º–Ω—ñ —ñ–º–ø–æ—Ä—Ç–∏
from typing import Hashable, Iterable, List, Tuple, TypeVar, Union  # üß∞ –¢–∏–ø–∏ –¥–ª—è —É–∑–≥–æ–¥–∂–µ–Ω–Ω—è –≤–∏—Ö–æ–¥—É

# ================================
# üîß –ü–ê–†–ê–ú–ï–¢–†–ò –¢–ò–ü–Ü–í
# ================================
T = TypeVar("T", bound=Hashable)                                    # üîí –•–µ—à–æ–≤–∞–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ –¥–ª—è –º–Ω–æ–∂–∏–Ω


# ================================
# üîÅ –£–¢–ò–õ–Ü–¢–ò
# ================================
def uniq_keep_order(
    seq: Iterable[T],
    *,
    as_tuple: bool = False,
) -> Union[List[T], Tuple[T, ...]]:
    """–í–∏–¥–∞–ª—è—î –¥—É–±–ª—ñ–∫–∞—Ç–∏ —ñ–∑ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ—Å—Ç—ñ, –∑–±–µ—Ä—ñ–≥–∞—é—á–∏ –ø–æ—Ä—è–¥–æ–∫."""
    seen: set[T] = set()                                            # üëÄ –í—ñ–¥—Å—Ç–µ–∂–µ–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏
    result: List[T] = []                                            # üì¶ –ö–æ–ª–µ–∫—Ü—ñ—è —É –ø–æ—Ä—è–¥–∫—É –ø–æ—è–≤–∏
    for item in seq:                                                # üîÅ –û–±—Ö–æ–¥–∏–º–æ –≤—Ö—ñ–¥–Ω—É –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å
        if item and item not in seen:                               # ‚úÖ –ü—Ä–æ–ø—É—Å–∫–∞—î–º–æ –ø–æ—Ä–æ–∂–Ω—ñ –π –ø–æ–≤—Ç–æ—Ä–∏
            seen.add(item)                                          # üìå –ü–æ–∑–Ω–∞—á–∞—î–º–æ —è–∫ –ø–æ–±–∞—á–µ–Ω–µ
            result.append(item)                                     # ‚ûï –î–æ–¥–∞—î–º–æ —É –≤–∏—Ö—ñ–¥–Ω—É –∫–æ–ª–µ–∫—Ü—ñ—é
    return tuple(result) if as_tuple else result                    # üîÑ –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ –ø–æ—Ç—Ä—ñ–±–Ω–∏–π —Ç–∏–ø


# ================================
# üì¶ –ï–ö–°–ü–û–†–¢
# ================================
__all__ = ["uniq_keep_order"]
