"""
üñºÔ∏è ImageSender ‚Äî —Å–µ—Ä–≤—ñ—Å–Ω–∏–π –∫–ª–∞—Å –¥–ª—è –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ –∑–æ–±—Ä–∞–∂–µ–Ω—å —É Telegram.
–ù–∞–¥—Å–∏–ª–∞—î —Å–ø–∏—Å–æ–∫ URL –∑–æ–±—Ä–∞–∂–µ–Ω—å —É –≤–∏–≥–ª—è–¥—ñ –º–µ–¥—ñ–∞-–≥—Ä—É–ø, –ø–æ 10 –∑–æ–±—Ä–∞–∂–µ–Ω—å –∑–∞ —Ä–∞–∑.
"""

# üåê Telegram API
from telegram import Update, InputMediaPhoto

# üß± –°–∏—Å—Ç–µ–º–Ω—ñ
import logging
logger = logging.getLogger(__name__)


class ImageSender:
    @staticmethod
    async def send_images(update: Update, images: list):
        """
        üì• –í—ñ–¥–ø—Ä–∞–≤–ª—è—î –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≥—Ä—É–ø–∞–º–∏ (–¥–æ 10 –∑–æ–±—Ä–∞–∂–µ–Ω—å —É –≥—Ä—É–ø—ñ).
        –Ø–∫—â–æ —Å–ø–∏—Å–æ–∫ –ø—É—Å—Ç–∏–π, –Ω–∞–¥—Å–∏–ª–∞—î—Ç—å—Å—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è–º.
        """
        if not images:
            logger.warning("‚ö†Ô∏è –°–ø–∏—Å–æ–∫ –∑–æ–±—Ä–∞–∂–µ–Ω—å –ø–æ—Ä–æ–∂–Ω—ñ–π ‚Äî –Ω–∞–¥—Å–∏–ª–∞—î–º–æ –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è")
            await update.message.reply_text("‚ö†Ô∏è –ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è –Ω–µ –∑–Ω–∞–π–¥–µ–Ω—ñ!")
            return
        
        logger.info(f"üì∏ –í—ñ–¥–ø—Ä–∞–≤–∫–∞ {len(images)} –∑–æ–±—Ä–∞–∂–µ–Ω—å (–±–ª–æ–∫–∞–º–∏ –ø–æ 10)")
        # üîÑ –ü—Ä–æ—Ö–æ–¥–∏–º–æ –ø–æ —Å–ø–∏—Å–∫—É –∑–æ–±—Ä–∞–∂–µ–Ω—å —ñ–∑ –∫—Ä–æ–∫–æ–º 10 (Telegram –ø—Ä–∏–π–º–∞—î –¥–æ 10 –º–µ–¥—ñ–∞ –≤ –æ–¥–Ω—ñ–π –≥—Ä—É–ø—ñ)
        for i in range(0, len(images), 10):
            # üß± –§–æ—Ä–º—É—î–º–æ –≥—Ä—É–ø—É InputMediaPhoto
            group = [InputMediaPhoto(img) for img in images[i:i + 10]]
            try:
                # üì§ –í—ñ–¥–ø—Ä–∞–≤–ª—è—î–º–æ —è–∫ –º–µ–¥—ñ–∞-–≥—Ä—É–ø—É
                await update.message.reply_media_group(group)
                logger.debug(f"‚úÖ –í—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ {len(group)} –∑–æ–±—Ä–∞–∂–µ–Ω—å (–ø–∞–∫–µ—Ç {i//10 + 1})")
            except Exception as e:
                logger.error(f"‚ùå –ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –≤—ñ–¥–ø—Ä–∞–≤—Ü—ñ –º–µ–¥—ñ–∞-–≥—Ä—É–ø–∏: {e}")
